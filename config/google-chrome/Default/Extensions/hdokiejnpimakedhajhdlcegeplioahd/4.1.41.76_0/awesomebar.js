var WindowTracker=g_deprecated_window_utils.WindowTracker,self=g_self;g_chrome.Cu["import"]("resource://gre/modules/XPCOMUtils.jsm",this);var handlers=[];AwesomeBarSuggestion=function(b){var a=handlers.push(b)-1,c=!1;return{destroy:function(){c||(c=!0,handlers[a]=null)}}};function handlerMatch(b,a){return!(!a||!a.matches.test(b))}function getMatchingHandler(b){return handlers.filter(function(a){return handlerMatch(b,a)}).shift()}
function addAddressBarSearch(b){function a(){if(!g()){var b="",a=getMatchingHandler(e.value);a&&a.icon&&(b=a.icon);k(b)}}function c(a){e.setAttribute("autocompletesearch",a);e.mSearchNames=null;"function"==typeof e.initSearchNames&&e.initSearchNames()}var d=makeWindowHelpers(b).change,f=b.BrowserUI,l=b.gBrowser,h=b.gURLBar,k,g,e;null==l?"undefined"!=typeof f&&(k=function(a){return f._updateIcon(a)},g=function(){return!1},e=f._edit,listen(b,f._edit,"input",a),d(b.Browser,"getShortcutOrURI",function(a){return function(b,
c){return a.call(this,b,c)}})):(k=function(a){},g=function(){return"valid"==h.getAttribute("pageproxystate")&&!h.hasAttribute("focused")},e=h,listen(b,h,"input",a),listen(b,l.tabContainer,"TabSelect",a),d(h,"_canonizeURL",function(a){return function(b,c){return a.call(this,b,c)}}));if("undefined"!=typeof e){var m=e.getAttribute("autocompletesearch");c(self.id+" "+m);unload(function(){return c(m)})}}
function addAutocomplete(){var b="@mozilla.org/autocomplete/search;1?name="+self.id,a=g_chrome.components.ID("504A8466-8D3D-11E0-A57E-D2F94824019B"),c,d={createInstance:function(a,b){return d.QueryInterface(b)},QueryInterface:XPCOMUtils.generateQI([g_chrome.Ci.nsIAutoCompleteSearch]),startSearch:function(a,b,f,g){function e(b,c){g.onSearchResult(d,{getCommentAt:function(a){return b[a].title},getImageAt:function(a){return b[a].favicon},getLabelAt:function(a){return b[a].label||b[a].url},getValueAt:function(a){return b[a].url},
getStyleAt:function(){return"favicon"},get matchCount(){return b.length},QueryInterface:XPCOMUtils.generateQI([g_chrome.Ci.nsIAutoCompleteResult]),removeValueAt:function(){},searchResult:g_chrome.Ci.nsIAutoCompleteResult.RESULT_SUCCESS,get searchString(){return a}})}null!=c&&clearTimeout(c);c=null;if(a.length){if((b=getMatchingHandler(a))&&a)b.onSearch(a,e)}else c=setTimeout(function(){g.onSearchResult(d,{searchResult:g_chrome.Ci.nsIAutoCompleteResult.RESULT_NOMATCH})},1E3)},stopSearch:function(){null!=
c&&clearTimeout(c);c=null}},f=g_chrome.Ci.nsIComponentRegistrar;g_chrome.Cm.QueryInterface(f).registerFactory(a,"LastPass Autocomplete",b,d);unload(function(){g_chrome.Cm.QueryInterface(f).unregisterFactory(a,d)})}WindowTracker({onTrack:addAddressBarSearch});addAutocomplete();function makeWindowHelpers(b){return{change:function(a,c,d){if(a){var f=a[c];a[c]="function"==typeof d?d(f):d;unload(function(){return a[c]=f},b)}}}};
