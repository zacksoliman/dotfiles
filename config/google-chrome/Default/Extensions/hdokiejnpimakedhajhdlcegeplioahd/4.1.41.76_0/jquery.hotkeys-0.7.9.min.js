(function(f){f.fn.__bind__=f.fn.bind;f.fn.__unbind__=f.fn.unbind;f.fn.__find__=f.fn.find;var d={version:"0.7.9",override:/keypress|keydown|keyup/g,triggersMap:{},specialKeys:{27:"esc",9:"tab",32:"space",13:"return",8:"backspace",145:"scroll",20:"capslock",144:"numlock",19:"pause",45:"insert",36:"home",46:"del",35:"end",33:"pageup",34:"pagedown",37:"left",38:"up",39:"right",40:"down",109:"-",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",
191:"/"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},newTrigger:function(a,c,d){var b={};b[a]={};b[a][c]={cb:d,disableInInput:!1};return b}};d.specialKeys=f.extend(d.specialKeys,{96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/"});f.fn.find=function(a){this.query=a;return f.fn.__find__.apply(this,arguments)};f.fn.unbind=function(a,c,
l){f.isFunction(c)&&(l=c,c=null);if(c&&"string"===typeof c)for(var b=(this.prevObject&&this.prevObject.query||this[0].id&&this[0].id||this[0]).toString(),g=a.split(" "),e=0;e<g.length;e++)delete d.triggersMap[b][g[e]][c];return this.__unbind__(a,l)};f.fn.bind=function(a,c,l){var b=a.match(d.override);if(f.isFunction(c)||!b)return this.__bind__(a,c,l);var g=null;(a=f.trim(a.replace(d.override,"")))&&(g=this.__bind__(a,c,l));"string"===typeof c&&(c={combi:c});if(c.combi)for(a=0;a<b.length;a++){var g=
b[a],e=c.combi.toLowerCase(),h=d.newTrigger(g,e,l),k=(this.prevObject&&this.prevObject.query||this[0].id&&this[0].id||this[0]).toString();h[g][e].disableInInput=c.disableInInput;d.triggersMap[k]?d.triggersMap[k][g]||(d.triggersMap[k][g]=h[g]):d.triggersMap[k]=h;var n=d.triggersMap[k][g][e];n?n.constructor!==Array?d.triggersMap[k][g][e]=[n]:d.triggersMap[k][g][e][n.length]=h[g][e]:d.triggersMap[k][g][e]=[h[g][e]];this.each(function(){var a=f(this);a.attr("hkId")&&a.attr("hkId")!==k&&(k=a.attr("hkId")+
";"+k);a.attr("hkId",k)});g=this.__bind__(b.join(" "),c,d.handler)}return g};d.findElement=function(a){if(!f(a).attr("hkId")&&(f.browser.opera||f.browser.safari))for(;!f(a).attr("hkId")&&a.parentNode;)a=a.parentNode;return a};d.handler=function(a){var c=d.findElement(a.currentTarget),c=f(c),l=c.attr("hkId");if(l){for(var l=l.split(";"),b=a.which,g=a.type,e=d.specialKeys[b],h=!e&&String.fromCharCode(b).toLowerCase(),k=a.shiftKey,n=a.ctrlKey,p=a.altKey||a.originalEvent.altKey,m=null,b=0;b<l.length;b++)if(d.triggersMap[l[b]][g]){m=
d.triggersMap[l[b]][g];break}if(m&&(k||n||p?(b="",p&&(b+="alt+"),n&&(b+="ctrl+"),k&&(b+="shift+"),(e=m[b+e])||h&&(e=m[b+h]||m[b+d.shiftNums[h]]||"shift+"===b&&m[d.shiftNums[h]])):e=m[e]||h&&m[h],e)){h=!1;for(b=0;b<e.length;b++){if(e[b].disableInInput&&(m=f(a.target),c.is("input")||c.is("textarea")||c.is("select")||m.is("input")||m.is("textarea")||m.is("select")))return!0;h=h||e[b].cb.apply(this,[a])}return h}}};window.hotkeys=d;return f})(jQuery);
