VaultItemBaseDisplay=function(g){this._model=g;this._parent=null;this._contextMenuHandler=this.createContextMenuHandler();this._eventHandler=LPTools.createEventHandler(this);this._selected=!1;this._$_element=this._element=null;this._textElements=[];this._destructed=!1;this._shown=!0;this._isLocked=!1};VaultItemDisplay=function(g){VaultItemBaseDisplay.call(this,g);this._dragStartSelected=!1};VaultItemDisplay.prototype=Object.create(VaultItemBaseDisplay.prototype);
VaultItemDisplay.prototype.constructor=VaultItemDisplay;AccountBaseDisplay=function(g){VaultItemDisplay.call(this,g)};AccountBaseDisplay.prototype=Object.create(VaultItemDisplay.prototype);AccountBaseDisplay.prototype.constructor=AccountBaseDisplay;AccountDisplay=function(g){AccountBaseDisplay.call(this,g)};AccountDisplay.prototype=Object.create(AccountBaseDisplay.prototype);AccountDisplay.prototype.constructor=AccountDisplay;ApplicationDisplay=function(g){VaultItemDisplay.call(this,g)};
ApplicationDisplay.prototype=Object.create(VaultItemDisplay.prototype);ApplicationDisplay.prototype.constructor=ApplicationDisplay;NoteDisplay=function(g){AccountBaseDisplay.call(this,g)};NoteDisplay.prototype=Object.create(AccountBaseDisplay.prototype);NoteDisplay.prototype.constructor=NoteDisplay;AttachmentDisplay=function(g){VaultItemBaseDisplay.call(this,g)};AttachmentDisplay.prototype=Object.create(VaultItemBaseDisplay.prototype);AttachmentDisplay.prototype.constructor=AttachmentDisplay;
FormFillDisplay=function(g){VaultItemDisplay.call(this,g)};FormFillDisplay.prototype=Object.create(VaultItemDisplay.prototype);FormFillDisplay.prototype.constructor=FormFillDisplay;IdentityDisplay=function(g){VaultItemBaseDisplay.call(this,g)};IdentityDisplay.prototype=Object.create(VaultItemBaseDisplay.prototype);IdentityDisplay.prototype.constructor=IdentityDisplay;AllIdentityDisplay=function(g){IdentityDisplay.call(this,g)};AllIdentityDisplay.prototype=Object.create(IdentityDisplay.prototype);
AllIdentityDisplay.prototype.constructor=AllIdentityDisplay;
GroupDisplay=function(g,h){VaultItemBaseDisplay.call(this,g);this._itemCount=0;this._items=[];this._subGroups=[];if(h)for(var d=0,l=h.length;d<l;++d){var p=h[d];p instanceof GroupDisplay?(this._subGroups.push(p),this._itemCount+=p._itemCount):(this._items.push(p),++this._itemCount);p.setParent(this)}this._model&&(this._contextMenuElement=LPTools.createElement("li",{vaultAction:Constants.ACTION_MOVE_TO_FOLDER},this._model.getName()));this._dragTarget=!0;this._openTimeouts=[];this._filteredSubGroups=
this._filteredItems=this._filter=this._subFolderContents=this._itemContents=null;this._expanded=!0};GroupDisplay.prototype=Object.create(VaultItemBaseDisplay.prototype);GroupDisplay.prototype.constructor=GroupDisplay;SharedGroupDisplay=function(g,h){GroupDisplay.call(this,g,h)};SharedGroupDisplay.prototype=Object.create(GroupDisplay.prototype);SharedGroupDisplay.prototype.constructor=SharedGroupDisplay;LinkedGroupDisplay=function(g,h){SharedGroupDisplay.call(this,g,h)};
LinkedGroupDisplay.prototype=Object.create(SharedGroupDisplay.prototype);LinkedGroupDisplay.prototype.constructor=LinkedGroupDisplay;EmergencyAccessGroupDisplay=function(g,h){LinkedGroupDisplay.call(this,g,h)};EmergencyAccessGroupDisplay.prototype=Object.create(LinkedGroupDisplay.prototype);EmergencyAccessGroupDisplay.prototype.constructor=EmergencyAccessGroupDisplay;
Container=function(g,h){GroupDisplay.call(this,null,g);this._selectedItems=[];this._lastToggleSelectTarget=null;this._buildOptions=h||{};this._buildOptions.sortFunction=this._buildOptions.sortFunction||this.sortByNameAsc;this.parseExcludeActions();this._lastSearchTerm=null;this._folderView=!0;this._sortedFilteredItems=this._sortedItems=null;this._subscriptions=[];(function(d){d.subscribe(Topics.COLLAPSE_ALL,function(){d.collapseAll();d._buildOptions.folderStateChange&&d._buildOptions.folderStateChange(d)});
d.subscribe(Topics.EXPAND_ALL,function(){d.expandAll();d._buildOptions.folderStateChange&&d._buildOptions.folderStateChange(d)});d.subscribe(Topics.DISPLAY_COMPACT,function(){d.displayCompact()});d.subscribe(Topics.DISPLAY_LARGE,function(){d.displayLarge()});d.subscribe(Topics.CLEAR_DATA,function(){d.destruct()})})(this);if(this.separateFavorites()){this.favoritesGroup=new FavoritesGroup;this.favoriteSeparatorSwithedOn=!1;this.favoritesGroup.setParent(this);this.favoritesGroup._buildOptions={excludeActions:[Constants.ACTION_OPEN_MOVE_TO_FOLDER_MENU,
Constants.ACTION_OPEN_MOVE_TO_SUB_FOLDER_MENU],allowDrag:!1};this.favoritesGroup.parseExcludeActions();for(var d=this.getItemModelChildren(),l=0,p=d.length;l<p;++l){var c=d[l];c.isFavorite()&&this.addFavorite(c)}}(function(d,c){d&&(c.searchInput=$("#"+d),c.searchInput.LP_addSearchHandlers("inputDialog",function(b){c.applySearch(b)}),c._buildOptions.keyboardNavigation&&c.searchInput.bind("keydown.containerSearchNav",function(b){if(40===(b.keyCode||b.which)){var a=c.getAllChildrenOrdered();0<a.length&&
(a[0].focus(),b.preventDefault(),b.stopPropagation())}}))})(LPTools.getOption(h,"searchInput",null),this)};Container.prototype=Object.create(GroupDisplay.prototype);Container.prototype.constructor=Container;Container.prototype.separateFavorites=function(){return LPTools.getOption(this._buildOptions,"separateFavorites",!1)};Container.prototype.subscribe=function(g,h){var d=Topics.get(g);this._subscriptions.push({topic:d,callback:h});d.subscribe(h)};
Container.prototype.addFavorite=function(g){if(this.favoritesGroup){for(var h=this.favoritesGroup.getItemModelChildren(),d=0,l=h.length;d<l;++d)if(h[d]===g)return;this.favoritesGroup.addChild(g.newDisplayObject())}};
Container.prototype.checkFavoriteWithNoFolder=function(g){bg.get("g_nofolder_feature_enabled")&&this.favoritesGroup&&(!this.favoriteSeparatorSwithedOn&&g&&(this.favoriteSeparatorSwithedOn=!0,$(".folderContainer.nofolder")&&$(".folderContainer.nofolder").addClass("withFavourites")),!this.favoriteSeparatorSwithedOn||g||this.favoritesGroup.getItemModelChildren().length||(this.favoriteSeparatorSwithedOn=!1,$(".folderContainer.nofolder")&&$(".folderContainer.nofolder").removeClass("withFavourites")))};
GridListContainer=function(g,h){Container.call(this,g,h);(function(d){d.subscribe(Topics.DISPLAY_GRID,function(){d.displayAsGrid()});d.subscribe(Topics.DISPLAY_LIST,function(){d.displayAsList()})})(this)};GridListContainer.prototype=Object.create(Container.prototype);GridListContainer.prototype.constructor=GridListContainer;IdentityContainer=function(g,h){Container.call(this,g,h)};IdentityContainer.prototype=Object.create(Container.prototype);IdentityContainer.prototype.constructor=IdentityContainer;
(function(){IdentityContainer.prototype.sortByNameAsc=function(g,h){return g instanceof AllIdentityDisplay?-1:h instanceof AllIdentityDisplay?1:(0,VaultItemBaseDisplay.prototype.sortByNameAsc)(g,h)};IdentityContainer.prototype.sortByNameDesc=function(g,h){return g instanceof AllIdentityDisplay?-1:h instanceof AllIdentityDisplay?1:(0,VaultItemBaseDisplay.prototype.sortByNameDesc)(g,h)}})();DummyGroupDisplay=function(g,h){GroupDisplay.call(this,g,h)};DummyGroupDisplay.prototype=Object.create(GroupDisplay.prototype);
DummyGroupDisplay.prototype.constructor=DummyGroupDisplay;DummyGroupDisplay.prototype.removeChild=function(){GroupDisplay.prototype.removeChild.apply(this,arguments);if(this.isEmpty()){for(var g=this;g._parent&&g._parent instanceof DummyGroupDisplay&&g._parent.isEmpty();)g=g._parent;g.destruct()}};DefaultGroupDisplay=function(g,h){GroupDisplay.call(this,g,h)};DefaultGroupDisplay.prototype=Object.create(GroupDisplay.prototype);DefaultGroupDisplay.prototype.constructor=DefaultGroupDisplay;
DefaultGroupDisplay.prototype.getContextMenuItems=function(){return[new LPTools.ContextMenuItem(Constants.ACTION_OPEN_ALL)]};DefaultGroupDisplay.prototype.addChild=function(){var g=this.isEmpty();GroupDisplay.prototype.addChild.apply(this,arguments);g&&this.show()};DefaultGroupDisplay.prototype.removeChild=function(){GroupDisplay.prototype.removeChild.apply(this,arguments);this.isEmpty()&&this.hide()};
FavoritesGroup=function(g){DefaultGroupDisplay.call(this,new DummyGroup(Strings.translateString("Favoritesproper")),g)};FavoritesGroup.prototype=Object.create(DefaultGroupDisplay.prototype);FavoritesGroup.prototype.constructor=FavoritesGroup;FavoritesGroup.prototype.removeChild=function(){DefaultGroupDisplay.prototype.removeChild.apply(this,arguments);var g=this.getContainer();g&&g.checkFavoriteWithNoFolder(!1)};ChangePasswordSite=function(g){VaultItemBaseDisplay.call(this,g)};
ChangePasswordSite.prototype=Object.create(VaultItemBaseDisplay.prototype);ChangePasswordSite.prototype.constructor=ChangePasswordSite;ChangePasswordSite.prototype.build=function(g){g=LPTools.buildCheckbox({vaultaction:Constants.ACTION_TOGGLE_SELECT},{text:this.getDisplayName()+": "+this._model.getUsername(),addClickHandler:!1});g.setAttribute("class","checkboxContainer");return g};SharedFolderAccessCheckbox=function(g){VaultItemBaseDisplay.call(this,g)};SharedFolderAccessCheckbox.prototype=Object.create(VaultItemBaseDisplay.prototype);
SharedFolderAccessCheckbox.prototype.constructor=SharedFolderAccessCheckbox;SharedFolderAccessCheckbox.prototype.build=function(g){g=LPTools.buildCheckbox({vaultaction:Constants.ACTION_TOGGLE_SELECT},{text:this.getDisplayName(),addClickHandler:!1});g.setAttribute("class","checkboxContainer");return g};
(function(g,h,d,l){var p=function(d){for(var c=[],g={},b=0,a=d.length;b<a;++b){var f=d[b]._model,q=f.getID();if(void 0===g[q])c.push(f),g[q]=f;else{for(var q=!0,r=0,m=c.length;r<m;++r)if(f===c[r]){q=!1;break}q&&c.push(f)}}return c};(function(){VaultItemBaseDisplay.prototype.DISPLAY_GRID="tile";VaultItemBaseDisplay.prototype.DISPLAY_LIST="list";VaultItemBaseDisplay.prototype.DISPLAY_OPTIONS={COMPACT:!1};VaultItemBaseDisplay.prototype.COMPACT_CLASS="compact";Topics.get(Topics.DISPLAY_COMPACT).subscribe(function(){VaultItemBaseDisplay.prototype.DISPLAY_OPTIONS.COMPACT=
!0});Topics.get(Topics.DISPLAY_LARGE).subscribe(function(){VaultItemBaseDisplay.prototype.DISPLAY_OPTIONS.COMPACT=!1});VaultItemBaseDisplay.prototype.lockForUpdate=function(){this._isLocked||(this._$_element&&(this.deselect(),this._$_element.addClass("locked"),this._$_element.attr("draggable","false"),this._lockedOverlay||(this._lockedOverlay=d.createElement("div","itemLocked")),this._element.appendChild(this._lockedOverlay)),this._isLocked=!0)};VaultItemBaseDisplay.prototype.unlock=function(){this._isLocked&&
(this._$_element&&(this._$_element.removeClass("locked"),this._$_element.attr("draggable",this.isDraggable().toString()),this._element.removeChild(this._lockedOverlay)),this._isLocked=!1)};VaultItemBaseDisplay.prototype.isDeleted=function(){return!1};VaultItemBaseDisplay.prototype.getElement=function(){return this._$_element};VaultItemBaseDisplay.prototype.getContextMenuItems=function(a){return[]};VaultItemBaseDisplay.prototype.createContextMenuHandler=function(a){return function(f){a?(a.action="sitepassword",
a.source="vault"):a={action:"sitepassword",source:"vault"};return function(b){Topics.get(Topics.CONTEXT_CLOSE).publish();f.handleEvent(b,a)}}(this)};VaultItemBaseDisplay.prototype.handleContextMenu=function(a){var f=this.createContextMenu();Topics.get(Topics.CONTEXT_MENU).publish(a,f)};VaultItemBaseDisplay.prototype.createContextMenu=function(){var a=this.getItemsForAction(),f=this._selected&&1<this.getSelectedItems().length,f=this.isDeleted()||this._model.isDeleted()?this.getDeletedContextMenuItems(f):
this.getContextMenuItems(f),b=h.getElementById("contextMenu"),c=b.children[0];g(c).empty();for(var m={},e=0,k=f.length;e<k;++e){var n=f[e],t=n.getAction();if(!0!==m[t])for(var l=0,p=a.length;l<p;++l)if(a[l].isExcludedAction(t)){m[t]=!0;break}!0!==m[t]&&n.build(c,this._contextMenuHandler,this._eventHandler)}d.addKeyBoardNavigation(c.children);return b};VaultItemBaseDisplay.prototype.getDeletedContextMenuItems=function(a){a=[];a.push(new d.ContextMenuItem(Constants.ACTION_RESTORE));a.push(new d.ContextMenuItem(Constants.ACTION_PURGE));
return a};VaultItemBaseDisplay.prototype.isExcludedAction=function(a,f){f=f||this.getBuildOptions();var b=d.getOption(f,"excludeActions",{})[a];void 0===b&&(b=!1);return b};VaultItemBaseDisplay.prototype.getDeletedItemButtonActions=function(){return[Constants.ACTION_RESTORE,Constants.ACTION_PURGE]};VaultItemBaseDisplay.prototype.getItemButtonActions=function(){return[]};VaultItemBaseDisplay.prototype.handleEvent=function(a,f){try{switch(a.type){default:if(!this._isLocked){var b=this.getVaultAction(a.target);
b&&this.handleClickEvent(b,g.extend({shiftKey:a.shiftKey,allowMultiple:d.getAttribute(this._element,a.target,"allowMultiple")||!0,target:a.target},f))}a.preventDefault();a.stopPropagation();break;case "contextmenu":this._isLocked||this.handleContextMenu(a);this._element.blur();a.preventDefault();a.stopPropagation();break;case "dragenter":this.handleDragEnter(a);break;case "dragleave":this.handleDragLeave(a);break;case "dragover":this.handleDragOver(a);break;case "drop":this.handleDrop(a);break;case "dragstart":this.handleDragStart(a);
break;case "dragend":this.handleDragEnd(a);break;case "keydown":this.handleKeyDown(a);break;case "focusin":this.handleFocusIn(a);break;case "focusout":this.handleFocusOut(a)}}catch(r){LPPlatform.logException(r)}};VaultItemBaseDisplay.prototype.getVaultAction=function(a){return d.getAttribute(this._element,a,"vaultaction")};VaultItemBaseDisplay.prototype.isOverride=function(){return!1};VaultItemBaseDisplay.prototype.handleClickEvent=function(a,f){if(this.isOverride(a)&&"function"===typeof this[a])this[a]();
else switch(a){case Constants.ACTION_TOGGLE_SELECT:this.handleToggleSelectedEvent(f.shiftKey);break;case Constants.ACTION_OPEN_MORE_OPTIONS:this.openMoreOptions();break;case Constants.ACTION_OPEN_MOVE_TO_FOLDER_MENU:this.openMoveToFolderMenu(f.target,this.getOtherGroups(!0));break;case Constants.ACTION_EDIT:f.dialogActions=this.getDialogActions();default:f.itemsForAction=this.getModelItemsForAction(a,f),this._model.handleClickEvent(a,f)}};VaultItemBaseDisplay.prototype.getDialogActions=function(){for(var a=
[],f=this.getItemButtonActions(),b=0,d=f.length;b<d;++b)this.isExcludedAction(f[b])||a.push(f[b]);return a};VaultItemBaseDisplay.prototype.handleEnter=function(a){a.target===this._element&&(a=this.getLaunchElementAction())&&this.handleClickEvent(a,{})};VaultItemBaseDisplay.prototype.handleFocusIn=function(){this._focused=!0;this._$_element.addClass("focus")};var c=null;Topics.get(Topics.DIALOG_OPEN).subscribe(function(){clearTimeout(c)});VaultItemBaseDisplay.prototype.handleFocusOut=function(){this._focused=
!1;(function(a){c=setTimeout(function(){!a._focused&&a._$_element&&a._$_element.removeClass("focus")},50)})(this)};VaultItemBaseDisplay.prototype.focus=function(){this._element.focus()};VaultItemBaseDisplay.prototype.handleKeyDown=function(a,f){switch(a.keyCode||a.which){case 13:this.handleEnter(a);break;case 37:this.navigateBackward();break;case 38:this.navigateUp();break;case 39:this.navigateForward();break;case 40:this.navigateDown()}};VaultItemBaseDisplay.prototype.navigateForward=function(){this.navigate(1)};
VaultItemBaseDisplay.prototype.navigateBackward=function(){this.navigate(-1)};VaultItemBaseDisplay.prototype.navigateUp=function(){this.navigateVerticalTile(-1)};VaultItemBaseDisplay.prototype.navigate=function(a){var f=this.getContainer();if(f)for(var f=f.getAllChildrenOrdered(),b=0,d=f.length;b<d;++b)if(f[b]===this){var c=b+a;0>c?c=0:c>d-1&&(c=d-1);f[c].focus()}};VaultItemBaseDisplay.prototype.navigateVerticalTile=function(){return function(a){var f=this.getContainer();if(f){for(var b=-1,f=f.getAllChildrenOrdered(),
d=f.length,c=0;c<d;++c)if(f[c]===this){b=c;break}for(var c=this._$_element.offset(),e=c.top;-1<b+a&&b+a<d;){var b=b+a,g=f[b]._$_element.offset();if(0<a&&g.top>e||0>a&&g.top<e){e=g.top;break}}if(!(f[b]instanceof GroupDisplay))for(;-1<b+a&&b+a<d;){var g=a,k=c,h=e,l=f[b+a]._$_element.offset(),g=0<g&&l.top>h||0>g&&l.top<h?!0:0<g&&l.left>k.left||0>g&&l.left<k.left?!0:!1;if(g)break;else b+=a}f[b].focus()}}}();VaultItemBaseDisplay.prototype.navigateDown=function(){this.navigateVerticalTile(1)};VaultItemBaseDisplay.prototype.getModelItemsForAction=
function(a,f){return p(this.getItemsForAction(f))};VaultItemBaseDisplay.prototype.deselect=function(a){if(this._selected){this._selected=!1;this._$_element.removeClass("selected");var f=this.getContainer();f&&f.removeSelectedItem(this,a)}};VaultItemBaseDisplay.prototype.select=function(a){if(!this._selected&&this._shown){this._selected=!0;this._$_element.addClass("selected");var f=this.getContainer();f&&f.addSelectedItems(this,a)}};VaultItemBaseDisplay.prototype.handleToggleSelectedEvent=function(a){this._selected?
this.deselect(a):this.select(a);if(a=this.getContainer())a._lastToggleSelectTarget=this};VaultItemBaseDisplay.prototype.getItemsForAction=function(a){var f=[this];!this._selected||a&&!a.allowMultiple||(f=this.getSelectedItems());return f};var e=function(a){return a instanceof DefaultGroupDisplay||a instanceof DummyGroupDisplay?a._model._data.group===Strings.Vault.NONE_GROUP||a._model._data.group===Strings.Consts.NONE_GROUP:!1},k=function(a,f){var b={defultFolderFound:!1,returnValue:null};bg.get("g_nofolder_feature_enabled")&&
(e(a)?(b.defultFolderFound=!0,b.returnValue=-1):e(f)&&(b.defultFolderFound=!0,b.returnValue=1));return b};VaultItemBaseDisplay.prototype.sortByNameAsc=function(a,f){var b=k(a,f);return b&&b.defultFolderFound?b.returnValue:VaultItemBase.prototype.sortByTextFunction(a,f,"getDisplayName",!0)};VaultItemBaseDisplay.prototype.sortByNameDesc=function(a,f){var b=k(a,f);return b&&b.defultFolderFound?b.returnValue:VaultItemBase.prototype.sortByTextFunction(a,f,"getDisplayName",!1)};VaultItemBaseDisplay.prototype.sortByMostRecent=
function(a,f){return VaultItemBase.prototype.sortByFunction(a,f,"getLastTouchValue",!1)};VaultItemBaseDisplay.prototype.getLastTouchValue=function(){return this._model.getLastTouch()};VaultItemBaseDisplay.prototype.getSearchResultItems=function(a,f){return 0<a.length&&!this.matches(a,f)?null:this};VaultItemBaseDisplay.prototype.applySearch=function(a,f){var b=this.matches(a,f);if(0<a.length&&!b)return null!==b&&this.hide(),null;this.show();this.expandParents(!1);return 1};VaultItemBaseDisplay.prototype.expandParents=
function(){for(var a=this._parent;a;)a.expand(),a=a._parent};VaultItemBaseDisplay.prototype.matches=function(a,f){if(0===a.length)return!0;var b=this._model.getSearchTokens(f);if(b){for(var c=0;c<a.length;++c){for(var e=a[c].toLowerCase(),g=!1,k=0,n=b.length;k<n;++k)if(-1<b[k].toLowerCase().indexOf(e)){g=!0;d.getOption(f,"removeMatchingTerms",!1)&&(a.splice(c,1),--c);break}if(!g)return!1}return!0}return null};VaultItemBaseDisplay.prototype.addViewToModel=function(){this._model&&this._model.addView(this)};
VaultItemBaseDisplay.prototype.removeViewFromModel=function(){this._model&&this._model.removeView(this)};VaultItemBaseDisplay.prototype.createTextElement=function(a,f,b){a=d.createElement(a,b);b=h.createTextNode(f.apply(this));a.appendChild(b);this._textElements.push({element:b,data:f});return a};VaultItemBaseDisplay.prototype.setElement=function(a){a?(this._element=a,this._$_element=g(a)):this._$_element=this._element=null};VaultItemBaseDisplay.prototype.getScrollTop=function(){var a=this._element.offsetTop,
f=this.getContainer(),b=this._parent!==f?this._parent.getLevel()+1:0;0<b&&f&&f.usesStickyFolders()&&(a-=this._parent._$_element.find(".folderContainer").outerHeight(!0)*b);return a};VaultItemBaseDisplay.prototype.updateTextElements=function(){if(this._textElements)for(var a=0,f=this._textElements.length;a<f;++a){var b=this._textElements[a];b.element.textContent=b.data.apply(this)}};VaultItemBaseDisplay.prototype.updateView=function(a,f){this.updateTextElements();this.setAccesibilityAttributes();var b=
this.getContainer();if(this._parent instanceof FavoritesGroup)this._model.isFavorite()||(this._parent.removeChild(this),b&&b.checkFavoriteWithNoFolder(!1));else if(b){if((this._parent?this._parent._model:null)!==a&&b.displayItemsInSpecifiedGroup()){var d=b;a&&((d=b.getGroupDisplay(a))||(d=b.addDummyGroups(a)));this._parent.removeChild(this);d.addChild(this,f)}this._model.isFavorite()&&(b.addFavorite(this._model),b.checkFavoriteWithNoFolder(!0))}};VaultItemBaseDisplay.prototype.reattachElement=function(){this._parent._itemContents.appendChild(this._element)};
VaultItemBaseDisplay.prototype.addClass=function(a){d.addClass(this._element,a)};VaultItemBaseDisplay.prototype.setParent=function(a){this._parent=a};VaultItemBaseDisplay.prototype.show=function(){null!==this._element&&(this._$_element.LP_show(),null===this._element.parentElement&&this.reattachElement(),this._shown=!0)};VaultItemBaseDisplay.prototype.hide=function(){null!==this._$_element&&(this._$_element.LP_hide(),this.deselect(),this._shown=!1)};var b=function(a,b){if(null!==a){var f=a.getAttribute("class").split(" ");
f[0]=b;a.setAttribute("class",f.join(" "))}};VaultItemBaseDisplay.prototype.displayAsList=function(){b(this._element,VaultItemBaseDisplay.prototype.DISPLAY_LIST)};VaultItemBaseDisplay.prototype.displayAsGrid=function(){b(this._element,VaultItemBaseDisplay.prototype.DISPLAY_GRID)};VaultItemBaseDisplay.prototype.setupListeners=function(a,b){a.bind("click",this._eventHandler);a.bind("contextmenu",this._eventHandler);b.keyboardNavigation&&(a.bind("keydown",this._eventHandler),a.bind("focusin",this._eventHandler),
a.bind("focusout",this._eventHandler))};VaultItemBaseDisplay.prototype.shouldDragAndDrop=function(a){var b=d.getOption(a,"allowDrag",!0);return d.getOption(a,"forceDrag",!1)||b&&this.isDraggable()};VaultItemBaseDisplay.prototype.build=function(a){var b=a.display||this.getItemClass();this.DISPLAY_OPTIONS.COMPACT&&(b+=" "+this.COMPACT_CLASS);b={"class":b,vaultaction:Constants.ACTION_TOGGLE_SELECT,draggable:this.shouldDragAndDrop(a).toString()};a.keyboardNavigation&&(b.tabindex="0");b=d.createElement("div",
b);a.additionalItemClasses&&d.addClass(b,a.additionalItemClasses);a.minimized&&d.addClass(b,"minimized");var c=d.createElement("div",{"class":"itemWrapper"});b.appendChild(c);var e=d.createElement("div","listCheckboxContainer");c.appendChild(e);(e=this.buildItemIconElement(a))?c.appendChild(e):d.addClass(b,"noIcon");e=d.createElement("div","itemInfo");c.appendChild(e);c=d.createElement("div","itemInfoTable");e.appendChild(c);for(var m=this.buildItemInfoTextElements(a),e=0,g=m.length;e<g;++e){var k=
m[e];0===e?1<g&&d.addClass(k,"first"):d.addClass(k,"showLarge");c.appendChild(k)}a=this.buildItemButtons(a);e=0;for(g=a.length;e<g;++e)m=d.createElement("div","itemButtonCell"),m.appendChild(a[e]),c.appendChild(m);return b};VaultItemBaseDisplay.prototype.setAccesibilityAttributes=function(){this._element&&this._element.setAttribute("aria-label",this._model.toString())};VaultItemBaseDisplay.prototype.buildItemHoverInfo=function(){return null};VaultItemBaseDisplay.prototype.buildItemButtons=function(a){for(var b=
[],c=this._model.isDeleted()?this.getDeletedItemButtonActions():this.getItemButtonActions(),e=0;e<c.length;++e){var g=c[e];this.isExcludedAction(g,a)||b.push(d.buildItemButton(g))}return b};VaultItemBaseDisplay.prototype.rebuild=function(){if(this._element&&this._element.parentElement){var a=this.getBuildOptions(),b=this.build(a);this._element.parentElement.insertBefore(b,this._element);this._$_element.remove();this.postBuild(b,a);return!0}return!1};VaultItemBaseDisplay.prototype.getLaunchElementAction=
function(){return null};VaultItemBaseDisplay.prototype.preBuild=function(a){a=d.getOption(a,"override",null);"function"===typeof a&&(a=a.apply(this),g.extend(this,a))};VaultItemBaseDisplay.prototype.postBuild=function(a,b){b=b||{};this.setElement(a);this.setupListeners(this._$_element,b);this.addViewToModel();this.setAccesibilityAttributes()};VaultItemBaseDisplay.prototype.buildItemIconElement=function(){var a=d.createElement("div","itemIcon"),b=this.getIconElement();a.appendChild(b);b.setAttribute("aria-hidden",
"true");b.setAttribute("role","presentation");b=d.createElement("div","itemIconOverlay");a.appendChild(b);var c=this._model.isDeleted()?null:this.getLaunchElementAction();null===c||this.isExcludedAction(c)||(c=d.createElement("button",{"class":"launchButton",vaultaction:c},Strings.Vault[Constants.ACTION_BUTTONS[c].title]),b.appendChild(c));c=d.createElement("button","itemCheckbox");b.appendChild(c);return a};VaultItemBaseDisplay.prototype.buildItemInfoTextElement=function(){return function(a){for(var b=
d.createElement("div","itemInfoText"),c=0,e=a.length;c<e;++c){var g=a[c];if(g instanceof Array){var k=null;if(0<g.length)for(var k=d.createElement("div"),h=0,n=g.length;h<n;++h)k.appendChild(g[h]);g=k}g&&b.appendChild(g)}return b}}();VaultItemBaseDisplay.prototype.getDisplayName=function(){return this._model.getName()};VaultItemBaseDisplay.prototype.createSecondaryNameTextElement=function(){return null};VaultItemBaseDisplay.prototype.buildItemInfoTextElements=function(){return[this.buildItemInfoTextElement([this.createTextElement("p",
this.getDisplayName,"name"),this.createSecondaryNameTextElement()])]};VaultItemBaseDisplay.prototype.getItemClass=function(){return VaultItemBaseDisplay.prototype.DISPLAY_LIST};VaultItemBaseDisplay.prototype.isDraggable=function(){return!1};VaultItemBaseDisplay.prototype.getIconElement=function(){return null};VaultItemBaseDisplay.prototype.destruct=function(){if(!this._destructed){this._parent&&(this.deselect(),this._parent.removeChild(this),this._$_element&&this._$_element.remove());this.removeViewFromModel();
for(var a in this)this.hasOwnProperty(a)&&delete this[a];this._destructed=!0}};VaultItemBaseDisplay.prototype.showAllChildren=function(){this.show();return 1};VaultItemBaseDisplay.prototype.applyFilter=function(a){if(void 0===a.func||a.func(this))return this.show(),1;this.hide();return 0};VaultItemBaseDisplay.prototype.collapseAll=function(){};VaultItemBaseDisplay.prototype.expandAll=function(){};VaultItemBaseDisplay.prototype.displayCompact=function(){this._$_element&&this._$_element.addClass(this.COMPACT_CLASS)};
VaultItemBaseDisplay.prototype.displayLarge=function(){this._$_element&&this._$_element.removeClass(this.COMPACT_CLASS)};VaultItemBaseDisplay.prototype.openMoreOptions=function(){};VaultItemBaseDisplay.prototype.addFavorite=function(){};VaultItemBaseDisplay.prototype.getContainer=function(){for(var a=this;a._parent;)a=a._parent;return a instanceof Container?a:null};VaultItemBaseDisplay.prototype.getBuildOptions=function(){for(var a=[],b=this;b;)b._buildOptions&&a.unshift(b._buildOptions),b=b._parent;
a.unshift({});return g.extend.apply(window,a)};VaultItemBaseDisplay.prototype.getSelectedItems=function(){var a=[],b=this.getContainer();b&&(a=b.getSelectedItems());return a};VaultItemBaseDisplay.prototype.usesStickyFolders=function(){var a=!1,b=this.getContainer();b&&(a=b.usesStickyFolders());return a};VaultItemBaseDisplay.prototype.openMoveToFolderMenu=function(a,b){var f=g(a).closest(".subMenuOption").find(".subMenu");if(0===f.children().length){if(bg.get("g_nofolder_feature_enabled")){for(var c=
!1,m=0;m<b.length;m++)if(e(b[m])){c=!0;break}c||this._parent._model._data.group==Strings.Consts.NONE_GROUP||this._parent._model._data.group==Strings.Vault.NONE_GROUP||((m=l.getGroupByName(Strings.Consts.NONE_GROUP))||(m=l.getGroupByName(Strings.Vault.NONE_GROUP)),m?m instanceof DummyGroup&&(m=m._views[0]):m=new DummyGroupDisplay(new DummyGroup(Strings.Consts.NONE_GROUP,null),null),b.push(m))}b.sort(VaultItemBaseDisplay.prototype.sortByNameAsc);m=0;for(c=b.length;m<c;++m){var k=b[m];bg.get("g_nofolder_feature_enabled")&&
e(k)&&(k._contextMenuElement.innerHTML=bg.gs(Strings.Vault.NO_FOLDER),k._contextMenuElement.innerText=bg.gs(Strings.Vault.NO_FOLDER));var h=g(k._contextMenuElement);h.unbind("click");h.bind("click",this.createContextMenuHandler({group:k._model,scrollIntoView:!1}));f.append(h)}}f.show("fast");d.addKeyBoardNavigation(f.children());d.setNavIndex(0)};VaultItemBaseDisplay.prototype.getOtherGroups=function(a){var b=[],c=this.getContainer(),d=this._parent===c?this:this._parent;if(c){c=c.getAllSubGroups(a);
a=d.getAllSubGroups(a);for(var e=0,g=c.length;e<g;++e)c[e]!==d&&(0<a.length&&a[0]===c[e]?e+=a.length-1:b.push(c[e]))}return b}})();(function(){var c=VaultItemBaseDisplay.prototype.DISPLAY_GRID;Topics.get(Topics.DISPLAY_GRID).subscribe(function(){c=VaultItemBaseDisplay.prototype.DISPLAY_GRID});Topics.get(Topics.DISPLAY_LIST).subscribe(function(){c=VaultItemBaseDisplay.prototype.DISPLAY_LIST});var e=h.getElementById("dragElement");null===e&&(e=d.createElement("div",{id:"dragElement"}),h.body.appendChild(e));
VaultItemDisplay.prototype.navigateDown=function(){this.getItemClass()===this.DISPLAY_LIST?this.navigateForward():VaultItemBaseDisplay.prototype.navigateDown.apply(this,arguments)};VaultItemDisplay.prototype.navigateUp=function(){this.getItemClass()===this.DISPLAY_LIST?this.navigateBackward():VaultItemBaseDisplay.prototype.navigateUp.apply(this,arguments)};VaultItemDisplay.prototype.handleClickEvent=function(c,b){switch(c){case Constants.ACTION_OPEN_MOVE_TO_SUB_FOLDER_MENU:this.openMoveToFolderMenu(b.target,
this.getAllSubGroups(!0));break;default:VaultItemBaseDisplay.prototype.handleClickEvent.apply(this,arguments)}};VaultItemDisplay.prototype.getItemClass=function(){return c};VaultItemDisplay.prototype.getAllSubGroups=function(){return this._parent.getAllSubGroups()};VaultItemDisplay.prototype.setupListeners=function(c,b){VaultItemBaseDisplay.prototype.setupListeners.apply(this,arguments);this.shouldDragAndDrop(b)&&(c=c.get(0),LPPlatform.addEventListener(c,"dragstart",this._eventHandler),LPPlatform.addEventListener(c,
"dragend",this._eventHandler),b&&"function"===typeof b.dragstart&&LPPlatform.addEventListener(c,"dragstart",b.dragstart))};VaultItemDisplay.prototype.destruct=function(){if(!this._destructed){if(this._element){LPPlatform.removeEventListener(this._element,"dragstart",this._eventHandler);LPPlatform.removeEventListener(this._element,"dragend",this._eventHandler);var c=this.getContainer();c&&"function"===typeof c._buildOptions.dragstart&&LPPlatform.removeEventListener(this._element,"dragend",c._buildOptions.dragstart)}VaultItemBaseDisplay.prototype.destruct.apply(this,
arguments)}};VaultItemDisplay.prototype.isDraggable=function(){return!0};VaultItemDisplay.prototype.getScrollTop=function(){var c=VaultItemBaseDisplay.prototype.getScrollTop.apply(this,arguments);return c-=parseInt(this._$_element.css("margin-top"))};VaultItemDisplay.prototype.handleDragStart=function(c){var b="function"===typeof c.dataTransfer.setDragImage;d.removeDOMChildren(e);var a=this.getItemsForAction();d.setDragItems(a);for(var f=[],q={},g=0,m=a.length,k=0;g<m;++g){var h=a[g];h._parent.setDragTarget(!1);
if(b){if(5>k){var n=h._model,l=n.getID(),p=!0;if(void 0===q[l])f.push(n),q[l]=n;else for(var l=0,u=f.length;l<u;++l)if(n===f[l]){p=!1;break}p&&(e.appendChild(h.buildDragElement(k===m-1)),++k)}else 5===k&&e.appendChild(d.createElement("div","dragItem last","... +"+(m-g)+" more"));h._$_element.addClass("dragStarted")}}b&&(c.dataTransfer.setDragImage(e,-20,0),c.dataTransfer.setData("text/plain",""));(c=this.getContainer())&&c.handleDragStart()};VaultItemDisplay.prototype.handleDragEnd=function(c){c=
d.getDragItems();for(var b=0,a=c.length;b<a;++b){var f=c[b];f._parent&&f._parent.setDragTarget(!0);f._$_element.removeClass("dragStarted")}(c=this.getContainer())&&c.handleDragEnd()};VaultItemDisplay.prototype.buildDragElement=function(c){c=d.createElement("div",{"class":"dragItem"+(c?" last":"")});var b=d.createElement("div","dragIconContainer itemIcon"),a=this.getIconElement();a.setAttribute("class",a.getAttribute("class")+" dragIcon");b.appendChild(a);c.appendChild(b);b=d.createElement("div","dragName",
this._model.getName());c.appendChild(b);return c}})();(function(){AccountBaseDisplay.prototype.convertTimeToString=function(){var c=function(c,d,b){c=Math.floor(c);return c+" "+(1===c?d:b)+" "+Strings.Vault.AGO};return function(e){if(void 0===e||31536E3>e)return Strings.Vault.NEVER;e=d.get_gmt_timestamp()-e;return 0>e?Strings.Vault.JUST_NOW:60>e?c(e,Strings.Vault.SECOND,Strings.Vault.SECONDS):3600>e?c(e/60,Strings.Vault.MINUTE,Strings.Vault.MINUTES):86400>e?c(e/60/60,Strings.Vault.HOUR,Strings.Vault.HOURS):
604800>e?c(e/60/60/24,Strings.Vault.DAY,Strings.Vault.DAYS):2678400>e?c(e/60/60/24/7,Strings.Vault.WEEK,Strings.Vault.WEEKS):31536E3>e?c(e/60/60/24/31,Strings.Vault.WEEK,Strings.Vault.WEEKS):c(e/60/60/24/365,Strings.Vault.YEAR,Strings.Vault.YEARS)}}();AccountBaseDisplay.prototype.getLastTouchString=function(){return this.convertTimeToString(this._model.getLastTouch())};AccountBaseDisplay.prototype.buildItemInfoTextElements=function(){var c=VaultItemDisplay.prototype.buildItemInfoTextElements.apply(this,
arguments);c.push(this.buildItemInfoTextElement([d.createElement("p","small infoLabel",Strings.Vault.LAST_USED),this.createTextElement("p",this.getLastTouchString,"small")]));return c};AccountBaseDisplay.prototype.getContextMenuItems=function(c){var e=VaultItemBaseDisplay.prototype.getContextMenuItems.apply(this,arguments);c||e.push(new d.ContextMenuItem(Constants.ACTION_EDIT));e.push(new d.ContextMenuItem(Constants.ACTION_DELETE));e.push(new d.ContextMenuItem(Constants.ACTION_SHARE));c||e.push(new d.ContextMenuItem(Constants.ACTION_CLONE));
bg.get("g_nofolder_feature_enabled")?e.push(new d.ContextMenuItem(Constants.ACTION_OPEN_MOVE_TO_FOLDER_MENU,{divider:!0,submenu:!0,text:bg.gs("Organize")})):e.push(new d.ContextMenuItem(Constants.ACTION_OPEN_MOVE_TO_FOLDER_MENU,{divider:!0,submenu:!0}));this._parent.hasSubGroup()&&e.push(new d.ContextMenuItem(Constants.ACTION_OPEN_MOVE_TO_SUB_FOLDER_MENU,{divider:!0,submenu:!0}));return e};AccountBaseDisplay.prototype.getItemButtonActions=function(){var c=[Constants.ACTION_EDIT];this._model.isSharingEnabled()&&
c.push(Constants.ACTION_SHARE);c.push(Constants.ACTION_DELETE);return c};AccountBaseDisplay.prototype.isExcludedAction=function(c,d){switch(c){case Constants.ACTION_COPY_USERNAME:case Constants.ACTION_COPY_PASSWORD:case Constants.ACTION_COPY_NOTE:case Constants.ACTION_COPY_URL:return!LPFeatures.allowClipboardCopy();case Constants.ACTION_SHARE:return!this._model.isSharingEnabled()||!LPFeatures.allowIndividualSharing();default:return VaultItemDisplay.prototype.isExcludedAction.apply(this,arguments)}}})();
(function(){AccountDisplay.prototype.buildItemIconElement=function(){var c=AccountBaseDisplay.prototype.buildItemIconElement.apply(this,arguments);this.bigImg||c.setAttribute("class",c.getAttribute("class")+" smallIcon");return c};AccountDisplay.prototype.getDisplayName=function(){if(this._model.hasGeneratedPassword()){var c=Strings.Vault.GENERATED_PREFIX+" ",d=this._model.getName();if(0===d.indexOf(c))return d.substring(c.length)}return AccountBaseDisplay.prototype.getDisplayName.apply(this,arguments)};
AccountDisplay.prototype.getUsernameValue=function(){return this._model.getUsername()};AccountDisplay.prototype.createSecondaryNameTextElement=function(){if(this.getUsernameValue())return this.createTextElement("p",this.getUsernameValue,"small infoLabel");if(this._model.hasGeneratedPassword()){var c=d.createElement("p","small infoLabel",Strings.Vault.GENERATED);c.insertBefore(d.createElement("i","badge warn small"),c.firstChild);return c}};AccountDisplay.prototype.getIconElement=function(){var c=
l.getImage(this),e="smallIcon";this.bigImg&&(e="bigIcon");void 0===c||null===c?c="data:image/gif;base64,R0lGODlhEAAQAIcAAAAAAExnf1BpgWR0iHZ6hHeBkX+GkYiOmpeaopucoaSlqqWmqrm9w7q+xL+/wry/xcXGyc3Oz9HS1NPU1tnZ2d/h4+Di5OLj5uPl5+Tk5OXm6O7u7+7v8O/w8e/w8vDw8fHx8vLy8/Pz8/Pz9PT09fX19fX29vb29vf39/f3+Pj4+Pj4+fn5+vr6+/v7/Pz8/P39/f7+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAAALAAAAAAQABAAAAiQAAEIHEiw4MAFCBEmQCjBIIAFMiLK8CBjA4QIBiFu2Fgh4oYJDgpq5Chxw4KCCiqSlKigIAKVGyowYNDgAYGCB2BWsHABgwYDBQvA/CCiBAoVBQoOUNlBhAkVLV4MKCigIgenK1zAiCGgYICKIEhAhRExgFcZHEKcYEG27NkOI1K0aCvDLMEAePPqteuwr8CAADs=":
0===c.indexOf("lps lp")&&(e+=" "+c,c="../images/clear_icon.gif");return d.createElement("img",{"class":e,src:c})};AccountDisplay.prototype.getLaunchElementAction=function(){return Constants.ACTION_LAUNCH};AccountDisplay.prototype.getContextMenuItems=function(c){var e=AccountBaseDisplay.prototype.getContextMenuItems.apply(this,arguments);c||(e.push(new d.ContextMenuItem(Constants.ACTION_COPY_USERNAME,{divider:!0})),e.push(new d.ContextMenuItem(Constants.ACTION_COPY_PASSWORD)),e.push(new d.ContextMenuItem(Constants.ACTION_COPY_URL)),
e.push(new d.ContextMenuItem(Constants.ACTION_GO_TO_URL,{divider:!0})));return e};AccountDisplay.prototype.isExcludedAction=function(c,d){switch(c){case Constants.ACTION_LAUNCH:case Constants.ACTION_GO_TO_URL:return!this._model.isURLLaunchable()||AccountBaseDisplay.prototype.isExcludedAction.apply(this,arguments);default:return AccountBaseDisplay.prototype.isExcludedAction.apply(this,arguments)}}})();(function(){ApplicationDisplay.prototype.getIconElement=AccountDisplay.prototype.getIconElement;ApplicationDisplay.prototype.getLaunchElementAction=
function(){return LPFeatures.allowLaunchApplication()?Constants.ACTION_LAUNCH:null};ApplicationDisplay.prototype.getItemButtonActions=function(){return[Constants.ACTION_EDIT,Constants.ACTION_DELETE]};ApplicationDisplay.prototype.getContextMenuItems=function(c){var e=VaultItemDisplay.prototype.getContextMenuItems.apply(this,arguments);c||(e.push(new d.ContextMenuItem(Constants.ACTION_COPY_USERNAME)),e.push(new d.ContextMenuItem(Constants.ACTION_COPY_PASSWORD)));e.push(new d.ContextMenuItem(Constants.ACTION_OPEN_MOVE_TO_FOLDER_MENU,
{divider:!0,submenu:!0}));this._parent.hasSubGroup()&&e.push(new d.ContextMenuItem(Constants.ACTION_OPEN_MOVE_TO_SUB_FOLDER_MENU,{divider:!0,submenu:!0}));c?e.push(new d.ContextMenuItem(Constants.ACTION_DELETE,{divider:!0})):(e.push(new d.ContextMenuItem(Constants.ACTION_EDIT,{divider:!0})),e.push(new d.ContextMenuItem(Constants.ACTION_DELETE)),e.push(new d.ContextMenuItem(Constants.ACTION_CLONE)));return e}})();(function(){GroupDisplay.prototype.handleEnter=function(){this.toggleOpen()};GroupDisplay.prototype.focus=
function(){this._element.children[0].children[0].focus()};GroupDisplay.prototype.handleClickEvent=function(b,a){switch(b){case Constants.ACTION_OPEN_ALL:l.openAll(this.getItemModelChildren());break;case Constants.ACTION_TOGGLE_OPEN:this.toggleOpen();break;case Constants.ACTION_EXPAND_ALL:this.expandAll();break;case Constants.ACTION_COLLAPSE_ALL:this.collapseAll();break;default:VaultItemBaseDisplay.prototype.handleClickEvent.apply(this,arguments)}};GroupDisplay.prototype.getModelItemsForAction=function(b){switch(b){case Constants.ACTION_PURGE:case Constants.ACTION_RESTORE:return this.getItemModelChildren();
case Constants.ACTION_SHARE:return this.getItemModelChildren(!0).concat(this.getAllSubGroupModels(!0));case Constants.ACTION_DELETE:return this.getItemModelChildren(!0).concat(this.getAllSubGroupModels(!0)).concat(this._model);case Constants.ACTION_MOVE_TO_FOLDER:return this.getItemModelChildren(!0).concat(this.getAllSubGroupModels(!0));default:VaultItemBaseDisplay.prototype.getModelItemsForAction.apply(this,arguments)}};GroupDisplay.prototype.isDeleted=function(){return!0===this._deleted};GroupDisplay.prototype.setDeleted=
function(){this._deleted=!0};GroupDisplay.prototype.updateTextElements=function(){VaultItemBaseDisplay.prototype.updateTextElements.apply(this,arguments);this._parent&&this._parent.updateTextElements.apply(this._parent,arguments)};GroupDisplay.prototype.updateView=function(){var b=this.getLevel();VaultItemDisplay.prototype.updateView.apply(this,arguments);this.getLevel()!==b&&this.rebuild()};GroupDisplay.prototype.isExcludedAction=function(b,a){switch(b){case Constants.ACTION_SHARE:return!LPFeatures.allowSharedFolders();
default:return VaultItemBaseDisplay.prototype.isExcludedAction.apply(this,arguments)}};GroupDisplay.prototype.parseExcludeActions=function(){var b=d.getOption(this._buildOptions,"excludeActions",null);if(b){for(var a={},f=0,c=b.length;f<c;++f)a[b[f]]=!0;this._buildOptions.excludeActions=a}};GroupDisplay.prototype.isEmpty=function(b){return 0===this.getChildren(b).length};GroupDisplay.prototype.applyToChildren=function(b,a){for(var f=this.getChildren(a),c=0,d=f.length;c<d;++c)this.applyToChild(b,f[c])};
GroupDisplay.prototype.applyToChild=function(b,a){switch(typeof b){case "string":a[b].apply(a);break;case "function":b.call(this,a)}};GroupDisplay.prototype.select=function(){this.applyToChildren("select")};GroupDisplay.prototype.destruct=function(){this._destructed||(this.applyToChildren(function(b){b.setParent(null);b.destruct()},!0),this._$_stickyFolder&&this._$_stickyFolder.remove(),VaultItemBaseDisplay.prototype.destruct.apply(this))};GroupDisplay.prototype.getLabel=function(){return this._model.getGroupName()+
" ("+this._itemCount+")"};GroupDisplay.prototype.getNoFolderLabel=function(){return""};GroupDisplay.prototype.getItemCount=function(){return this._itemCount};GroupDisplay.prototype.displayAsList=function(){this._element&&this.applyToChildren("displayAsList",!0)};GroupDisplay.prototype.displayAsGrid=function(){this._element&&this.applyToChildren("displayAsGrid",!0)};GroupDisplay.prototype.buildItem=function(b,a,f){b.preBuild(a);var c=b.build(a);f&&f.appendChild(c);b.postBuild(c,a)};GroupDisplay.prototype.buildItems=
function(b,a,f){f=f||this.getBuildOptions();"function"===typeof f.sortFunction&&b.sort(f.sortFunction);for(var c=0,d=b.length;c<d;++c)this.buildItem(b[c],f,a);0<b.length&&b[b.length-1].addClass("last")};GroupDisplay.prototype.sortItems=function(b,a,f,c){b.sort(f);if(a){(void 0===c||c)&&d.removeDOMChildren(a);f=0;for(c=b.length;f<c;++f){var e=b[f];e._$_element.removeClass("last");a.appendChild(e._element)}0<b.length&&b[b.length-1].addClass("last")}return b};GroupDisplay.prototype.buildFolderElement=
function(b){var a=this.getLevel(),f="folderContainer";0<a&&(f+=" tab"+a);a=d.createElement("div",f);f={"class":"folderLabel",vaultaction:Constants.ACTION_TOGGLE_OPEN};b.keyboardNavigation&&(f.tabindex="0");b=this.createTextElement("div",this.getLabel,f);bg.get("g_nofolder_feature_enabled")&&(f=this.getLabel.apply(this),-1<f.indexOf(Strings.Vault.NONE_GROUP)||-1<f.indexOf(Strings.Consts.NONE_GROUP))&&(b=this.createTextElement("div",this.getNoFolderLabel,{"class":"fakefolderLabel"}),this._parent instanceof
Container&&this._parent.favoriteSeparatorSwithedOn?a.setAttribute("class","folderContainer nofolder withFavourites"):a.setAttribute("class","folderContainer nofolder"));a.appendChild(b);return a};GroupDisplay.prototype.build=function(b){b=b||{};var a="folder";this.DISPLAY_OPTIONS.COMPACT&&(a+=" "+this.COMPACT_CLASS);a=d.createElement("div",a);a.appendChild(this.buildFolderElement(b));"undefined"!==typeof b.additionalGroupClasses&&d.addClass(a,b.additionalGroupClasses);var f=d.createElement("div",
"contents");a.appendChild(f);this._itemContents=d.createElement("div","itemContents");this._subFolderContents=d.createElement("div","subFolderContents");f.appendChild(this._itemContents);f.appendChild(this._subFolderContents);this.buildItems(this.getSubGroups(),this._subFolderContents,b);this.buildItems(this.getItems(),this._itemContents,b);this.usesStickyFolders()&&this.buildStickyFolder(b);return a};GroupDisplay.prototype.setElement=function(b){VaultItemBaseDisplay.prototype.setElement.apply(this,
arguments);this.folderLabel=c(this._$_element).get(0)};GroupDisplay.prototype.setAccesibilityAttributes=function(){this.folderLabel&&(this.folderLabel.setAttribute("role","button"),this.folderLabel.setAttribute("aria-expanded","true"),this.folderLabel.setAttribute("aria-label",this._model.toString()))};GroupDisplay.prototype.preBuild=function(){VaultItemBaseDisplay.prototype.preBuild.apply(this,arguments);this._itemCount=this.getItemChildren().length};GroupDisplay.prototype.postBuild=function(){VaultItemBaseDisplay.prototype.postBuild.apply(this,
arguments);this._contents=this._$_element.find(".contents").first();this._expanded||(this.addCollapsedClasses(),this._contents.hide())};GroupDisplay.prototype.buildStickyFolder=function(b){this._stickyFolder=this.buildFolderElement(g.extend({},b,{keyboardNavigation:!1}));this._$_stickyFolder=g(this._stickyFolder);this._$_stickyFolder.addClass("stickyFolder");this._$_stickyFolder.css("z-index",-this.getLevel());this.setupListeners(this._$_stickyFolder,b)};GroupDisplay.prototype.getLabelHeight=function(){var b;
return function(){void 0===b&&(b=this._$_element.find(".folderContainer").outerHeight());return b}}();GroupDisplay.prototype.getOffsetTop=function(){var b;return function(){void 0===b&&(b=Math.min(0,parseInt(this._$_element.css("margin-top"))));return this._element.offsetTop-b}}();GroupDisplay.prototype.getOffsetBottom=function(){var b;return function(){void 0===b&&(b=Math.max(0,parseInt(this._$_element.css("margin-bottom"))));return this._element.offsetTop+this._element.clientHeight+b}}();var c=
function(b){return(b.hasClass("folderContainer")?b:b.children(".folderContainer")).children(".folderLabel")};GroupDisplay.prototype.setupListeners=function(b,a){var f=c(b);f.bind("click",this._eventHandler);f.bind("contextmenu",this._eventHandler);a.keyboardNavigation&&f.bind("keydown",this._eventHandler);if("undefined"===typeof a.allowDrop||a.allowDrop)b.bind("dragover",this._eventHandler),b.bind("drop",this._eventHandler),b.bind("dragenter",this._eventHandler),b.bind("dragleave",this._eventHandler)};
GroupDisplay.prototype.displayCompact=function(){VaultItemBaseDisplay.prototype.displayCompact.apply(this,arguments);this._element&&this.applyToChildren("displayCompact",!0)};GroupDisplay.prototype.displayLarge=function(){VaultItemBaseDisplay.prototype.displayLarge.apply(this,arguments);this._element&&this.applyToChildren("displayLarge",!0)};GroupDisplay.prototype.toggleOpen=function(){this._expanded?this.collapse():this.expand();var b=this.getContainer();b._buildOptions.folderStateChange&&b._buildOptions.folderStateChange(b)};
GroupDisplay.prototype.removeCollapsedClasses=function(){this._$_element.removeClass("closed");this.folderLabel.setAttribute("aria-expanded","true");this._$_stickyFolder&&this._$_stickyFolder.removeClass("closed")};GroupDisplay.prototype.addCollapsedClasses=function(){this._contents.css("height","");this._$_element.addClass("closed");this.folderLabel.setAttribute("aria-expanded","false");this._$_stickyFolder&&this._$_stickyFolder.addClass("closed")};GroupDisplay.prototype.expand=function(){this._expanded||
(this._element&&(this.removeCollapsedClasses(),this._contents.slideDown(200)),this._expanded=!0)};GroupDisplay.prototype.expandAll=function(){this.expand();this.applyToChildren("expandAll")};GroupDisplay.prototype.collapse=function(){if(this._expanded){if(bg.get("g_nofolder_feature_enabled")){var b=this._model&&this._model._data&&this._model._data.group;if(b===Strings.Vault.NONE_GROUP||b===Strings.Consts.NONE_GROUP)return}this._element&&((b=this.getContainer())&&this.usesStickyFolders()&&(b=b.scrollParent,
this.getOffsetTop()<b.scrollTop()&&b.scrollTop(this._element.offsetTop-this._stickyFolder.offsetTop)),this._contents.slideUp(200),this.addCollapsedClasses());this._expanded=!1}};GroupDisplay.prototype.collapseAll=function(){this.collapse();this.applyToChildren("collapseAll")};GroupDisplay.prototype.isExpanded=function(){return this._expanded};GroupDisplay.prototype.hasSubGroup=function(){return 0<this.getSubGroups().length};GroupDisplay.prototype.getAllSubGroups=function(b){for(var a=this.getSubGroups(b),
f=0,c=a.length;f<c;++f)a=a.concat(a[f].getAllSubGroups(b));return a};GroupDisplay.prototype.getAllSubGroupModels=function(b){return p(this.getAllSubGroups(b))};GroupDisplay.prototype.getAllSubGroupsOrdered=function(b){for(var a=[],f=this.getSubGroups(b),c=0,d=f.length;c<d;++c){var e=f[c];e._shown&&(a.push(e),a=a.concat(e.getAllSubGroupsOrdered(b)))}return a};GroupDisplay.prototype.reattachElement=function(){this._parent._subFolderContents.appendChild(this._element)};GroupDisplay.prototype.getSearchOptions=
function(){return{searchNotes:l.getPreference("searchNotes",!0)}};GroupDisplay.prototype.parseSearchTerms=function(b){b=b.trim().split(" ");for(var a=[],f=0,c=b.length;f<c;++f)0<b[f].length&&a.push(b[f]);return a};GroupDisplay.prototype.applySearch=function(b,a){b instanceof Array||(b=this.parseSearchTerms(b));if(a.moreSpecific&&!this._shown)return null;b=b.slice();if(0<b.length&&VaultItemBaseDisplay.prototype.applySearch.call(this,b,g.extend({},a,{removeMatchingTerms:!0})))return this.showAllChildren(a.ignoreFilterOnSearch),
this.expand(!1),this._itemCount;for(var c=!1,d=this.getChildren(a.ignoreFilterOnSearch),e=this._itemCount=0,m=d.length;e<m;++e){var k=d[e].applySearch(b,a);null!==k&&(this._itemCount+=k,c=!0)}0<b.length&&!c?this.hide():(this.show(),this.updateTextElements());0===b.length&&this.applyFilter(this._filter,{shouldRecurse:!1,forceFilter:!0});return c?this._itemCount:null};GroupDisplay.prototype.getSearchResultItems=function(b,a){if(0<b.length&&this.matches(b,a))return this.getItemChildren();for(var c=this.getChildren(a.ignoreFilterOnSearch),
d=[],e=0,g=c.length;e<g;++e){var k=c[e].getSearchResultItems(b,a);null!==k&&(d=d.concat(k))}return d};GroupDisplay.prototype.handleDragEnter=function(b){if(this._dragTarget&&(this._$_element.toggleClass("dragTarget"),b.preventDefault(),this._$_element.hasClass("closed"))){var a=this;this._openTimeouts.push(setTimeout(function(){a.expand()},500))}b.stopPropagation()};GroupDisplay.prototype.setDragTarget=function(b){this._dragTarget=b};GroupDisplay.prototype.handleDragLeave=function(b){if(this._dragTarget){this._$_element.toggleClass("dragTarget");
b.preventDefault();var a=this._openTimeouts.pop();void 0!==a&&clearTimeout(a)}b.stopPropagation()};GroupDisplay.prototype.handleDragOver=function(b){this._dragTarget&&b.preventDefault();b.stopPropagation()};GroupDisplay.prototype.handleDrop=function(b){if(this._dragTarget){this._$_element.removeClass("dragTarget");for(var a=d.getDragItems(),c=0,e=a.length;c<e;++c)a[c]._parent.setDragTarget(!0);this.moveToFolder(p(a));b.preventDefault();b.stopPropagation()}};GroupDisplay.prototype.moveToFolder=function(b){0<
b.length&&b[0].moveToFolder(this._model,b)};var e=function(b,a){for(var c=0,d=a.length;c<d;++c)if(b===a[c])return a.splice(c,1),!0};GroupDisplay.prototype.removeChild=function(b){var a=this._filter&&!1===this._filter.showEmptyGroups&&!this.isEmpty();e(b,this._items)?(this.updateItemCount(-1),this._filteredItems=null):(e(b,this._subGroups),this.updateItemCount(-b._itemCount),this._filteredSubGroups=null);b.setParent(null);b._element&&b._element.parentElement&&b._element.parentElement.removeChild(b._element);
Topics.get(Topics.REAPPLY_SEARCH).publish(this,this.getSearchOptions());a&&this.isEmpty()&&(b=this.getContainer())&&b.checkForStateChange(function(a){return function(){a.applyFilterToParents()}}(this));this.updateTextElements()};GroupDisplay.prototype.getLevel=function(){for(var b=0,a=this._parent;a._parent;)++b,a=a._parent;return b};GroupDisplay.prototype.updateItemCount=function(b){this._itemCount+=b;this._parent&&this._parent.updateItemCount(b)};GroupDisplay.prototype.addChild=function(b,a){b instanceof
Array||(b=[b]);for(var c=this.getContainer(),e=this.getBuildOptions(),g=[],m=[],k=0,h=b.length;k<h;++k){var n=b[k];n._parent!==this&&(n._parent&&n._parent.removeChild(n),n instanceof GroupDisplay?(this.updateItemCount(n._itemCount),this._subGroups.push(n),this._filteredSubGroups=null,g.push(n)):(this.updateItemCount(1),this._items.push(n),this._filteredItems=null,m.push(n)),n.setParent(this),null!==this._element&&null===n._element&&this.buildItem(n,e))}e&&(0<m.length&&this.sortItems(this.getItems(!0),
this._itemContents,e.sortFunction),0<g.length&&this.sortItems(this.getSubGroups(!0),this._subFolderContents,e.sortFunction,this._subFolderContents!==this._itemContents));this._filter&&c?c.checkForStateChange(function(a){return function(){a.applyFilterToParents()}}(this)):this._shown||this.show();this.updateTextElements();d.getOption(a,"scrollIntoView",!0)&&c&&c.scrollParent&&(1===m.length?c.scrollParent.scrollTop(b[0].getScrollTop()):1<m.length&&c.scrollParent.scrollTop(this.getScrollTop()))};GroupDisplay.prototype.applyFilterToParents=
function(){for(var b=this;b;)b.applyFilter(b._filter,{shouldRecurse:!1,forceFilter:!0}),b=b._parent};GroupDisplay.prototype.sortChildren=function(b){var a=this.getSubGroups(!0);this.sortItems(a,this._subFolderContents,b);this.sortItems(this.getItems(!0),this._itemContents,b,this._subFolderContents!==this._itemContents);this.getSubGroups().sort(b);this.getItems().sort(b);for(var c=0,d=a.length;c<d;++c)a[c].sortChildren(b)};GroupDisplay.prototype.getContextMenuItems=function(b){var a=VaultItemBaseDisplay.prototype.getContextMenuItems.apply(this,
arguments);a.push(new d.ContextMenuItem(Constants.ACTION_RENAME));this._model.isSharingEnabled()&&a.push(new d.ContextMenuItem(Constants.ACTION_SHARE));a.push(new d.ContextMenuItem(Constants.ACTION_DELETE,{text:Strings.Vault.DELETE_FOLDER}));a.push(new d.ContextMenuItem(Constants.ACTION_OPEN_MOVE_TO_FOLDER_MENU,{divider:!0,submenu:!0}));a.push(new d.ContextMenuItem(Constants.ACTION_CREATE_SUB_FOLDER));a.push(new d.ContextMenuItem(Constants.ACTION_OPEN_ALL,{divider:!0}));return a};GroupDisplay.prototype.getChildren=
function(b){return this.getItems(b).concat(this.getSubGroups(b))};GroupDisplay.prototype.getAllChildrenOrdered=function(){var b=function(a){a=this.getSubGroups(a);for(var b=[],c=0,d=a.length;c<d;++c){var e=a[c];e._shown&&(b.push(e),e._expanded&&(b=b.concat(e.getAllChildrenOrdered())))}return b};return function(a,c){for(var f=this.getItems(a),d=[],e=0,g=f.length;e<g;++e)f[e]._shown&&d.push(f[e]);return d.concat(b.call(this,a))}}();GroupDisplay.prototype.getChildrenIncludingFavorites=GroupDisplay.prototype.getChildren;
GroupDisplay.prototype.applyFilter=function(b,a){var c=d.getOption(a,"forceFilter",!1);if(b&&(null===this._filter||this._filter!==b||c)){var e=d.getOption(a,"shouldRecurse",!0),g=d.getOption(a,"recursed",!1),m=this instanceof Container||void 0===b.func||b.func(this);if(e||!g){a=a||{};a.recursed=!0;for(var e=this.getChildren(!0),k=g=0,h=e.length;k<h;++k)g+=e[k].applyFilter(b,a);this._itemCount=g;this.updateTextElements()}if(this._filter!==b||c)this._filter=b,this._filteredItems=null,this._filteredItems=
this.getItems(),this._filteredSubGroups=null,this._filteredSubGroups=this.getSubGroups();0===this._itemCount&&!b.showEmptyGroups||!m?this.hide():this.show()}return this._itemCount};var k=function(b){this._itemCount+=b.showAllChildren()};GroupDisplay.prototype.showAllChildren=function(b){this._itemCount=0;this.applyToChildren(k,b);this.updateTextElements();return this._itemCount};GroupDisplay.prototype.getItemModelChildren=function(b){return p(this.getItemChildren(b))};GroupDisplay.prototype.getItemChildren=
function(b){for(var a=this.getItems(b),c=this.getSubGroups(b),d=0,e=c.length;d<e;++d)a=a.concat(c[d].getItemChildren(b));return a};GroupDisplay.prototype.getItems=function(b){if(null===this._filter||b)return this._items;if(null===this._filteredItems){this._filteredItems=[];b=0;for(var a=this._items.length;b<a;++b){var c=this._items[b];(void 0===this._filter.func||this._filter.func(c))&&this._filteredItems.push(c)}}return this._filteredItems};GroupDisplay.prototype.getSubGroupModels=function(b){return p(this.getSubGroups(b))};
GroupDisplay.prototype.getSubGroups=function(b){if(null===this._filter||b)return this._subGroups;if(null===this._filteredSubGroups){this._filteredSubGroups=[];b=0;for(var a=this._subGroups.length;b<a;++b){var c=this._subGroups[b];(void 0===this._filter.func||this._filter.func(c))&&(0<c._itemCount||this._filter.showEmptyGroups)&&this._filteredSubGroups.push(c)}}return this._filteredSubGroups};GroupDisplay.prototype.show=function(){VaultItemBaseDisplay.prototype.show.apply(this,arguments);this._parent&&
this._parent.show()};GroupDisplay.prototype.processItems=function(b,a){if(b instanceof Array)for(var c=0,d=b.length;c<d;++c)a.call(this,b[c]);else a.call(this,b)};(function(){Container.prototype.initialize=function(a,b){null===this._element&&(this.setElement(a),this.scrollParent=b,this.favoritesGroup&&(this._favoriteElement=d.createElement("div"),a.appendChild(this._favoriteElement),this.buildItems([this.favoritesGroup],this._favoriteElement,this.favoritesGroup.getBuildOptions()),this.favoritesGroup.isEmpty()?
this.favoritesGroup.hide():this.checkFavoriteWithNoFolder(!0)),d.getOption(this._buildOptions,"separateItems",!1)?(this._itemContents=d.createElement("div","itemContentPadding itemContents"),this._subFolderContents=d.createElement("div","folderWrapper"),a.appendChild(this._itemContents),a.appendChild(this._subFolderContents)):this._subFolderContents=this._itemContents=a,this.buildItems(this.getSubGroups(),this._subFolderContents,this._buildOptions),this.buildItems(this.getItems(),this._itemContents,
this._buildOptions),this._folderView||this.sortItemsNoFolder(this._buildOptions.sortFunction),this.usesStickyFolders()&&(this.updatedStickyFolderContainer=!1,this.stickyFoldersContainer=d.createElement("div","stickyFoldersContainer folder"),this.$stickyFoldersContainer=g(this.stickyFoldersContainer),this._buildOptions.stickyFolderParent.insertBefore(this.stickyFoldersContainer,this._buildOptions.stickyFolderParent.firstElementChild),function(a){var b=!1;a.scrollHandler=function(c){a._$_element.is(":visible")&&
a._folderView&&("function"===typeof requestAnimationFrame?b||(requestAnimationFrame(function(f){0<f&&a.updateStickyFolders(c.target.scrollTop);b=!1}),b=!0):a.updateStickyFolders(c.target.scrollTop))};a.scrollParent.scroll(a.scrollHandler)}(this)))};Container.prototype.displayItemsInSpecifiedGroup=function(){return!0};Container.prototype.getScrollTop=function(){return 0};Container.prototype.usesStickyFolders=function(){return d.getOption(this._buildOptions,"stickyFolders",!1)};Container.prototype.updateStickyFolders=
function(a){if(null!==this._$_element){this.updatedStickyFolderContainer||(this.$stickyFoldersContainer.css("right",this.scrollParent.width()-this._$_element.width()),this.updatedStickyFolderContainer=!0);var b=[];d.removeDOMChildren(this.stickyFoldersContainer);for(var c=this.getAllSubGroupsOrdered(),e=0,g=c.length;e<g;++e){var k=c[e],h=!1,n=k.getOffsetTop()-a;if(0>n&&k.getOffsetBottom()>a)h=!0;else if(0<=n)if(h=b.length*k.getLabelHeight(),n<h){var l=k.getLevel(),p=b[l];if(p)if(0<l&&h-n>(b.length-
l)*k.getLabelHeight())b=b.slice(0,l),h=!0;else{p.css("margin-top",Math.min(0,n-h));break}else h=!0}else break;h&&(k._$_stickyFolder.css("margin-top",""),b[k.getLevel()]=k._$_stickyFolder)}this.$stickyFoldersContainer.append(b)}};Container.prototype.updateView=function(){};Container.prototype.matches=function(a,b){return null};Container.prototype.getChildrenIncludingFavorites=function(a){var b=GroupDisplay.prototype.getChildrenIncludingFavorites.apply(this,arguments);this.favoritesGroup&&b.unshift(this.favoritesGroup);
return b};Container.prototype.getAllSubGroupsIncludingFavorites=function(a){a=this.getAllSubGroups(a);this.favoritesGroup&&(a=a.concat(this.favoritesGroup));return a};GroupDisplay.prototype.getSortedItems=function(a){if(null===this._filter||a)return this._sortedItems;if(null===this._sortedFilteredItems){this._sortedFilteredItems=[];a=0;for(var b=this._sortedItems.length;a<b;++a){var c=this._sortedItems[a];(void 0===this._filter.func||this._filter.func(c))&&this._sortedFilteredItems.push(c)}}return this._sortedFilteredItems};
Container.prototype.applyFilter=function(a,b){d.getOption(b,"checkForStateChange",!0)?this.checkForStateChange(GroupDisplay.prototype.applyFilter,arguments):GroupDisplay.prototype.applyFilter.apply(this,arguments);this._buildOptions.multiSelect=d.getOption(a,"multiSelect",!0);this.favoritesGroup&&this.favoritesGroup.applyFilter(a,b)};Container.prototype.applyToChildren=function(a,b){GroupDisplay.prototype.applyToChildren.apply(this,arguments);this.favoritesGroup&&this.applyToChild(a,this.favoritesGroup)};
Container.prototype.getSearchResultItems=function(a,b){var c=GroupDisplay.prototype.getSearchResultItems.call(this,this.parseSearchTerms(a),g.extend(b,this.getSearchOptions(a)));c.sort(VaultItemBaseDisplay.prototype.sortByNameAsc);return c};Container.prototype.getSearchOptions=function(a){var b=GroupDisplay.prototype.getSearchOptions.apply(this,arguments);b.ignoreFilterOnSearch=this._buildOptions.ignoreFilterOnSearch;var c=!1;this._lastSearchTerm&&a&&a.length>this._lastSearchTerm.length&&(c=a.split(" ").length===
this._lastSearchTerm.split(" ").length);b.moreSpecific=c;return b};Container.prototype.shouldSearch=function(a){return null===this._lastSearchTerm?0<a.length:this._lastSearchTerm!==a};Container.prototype.applySearch=function(a,b){a=a.trim();if(this.shouldSearch(a)){b=g.extend(b,this.getSearchOptions(a));this._lastSearchTerm=a;var c=this.parseSearchTerms(a);this._$_element.hide();var d=GroupDisplay.prototype.applySearch.call(this,c,b);this._element.removeAttribute("style");this.favoritesGroup&&this.favoritesGroup.applySearch(c,
b);return d}};Container.prototype.hide=function(){d.removeDOMChildren(this.stickyFoldersContainer)};Container.prototype.show=function(){};Container.prototype.checkForStateChange=function(a,b){if("function"===typeof this._buildOptions.stateChangeCallback){var c=this.isEmpty();a.apply(this,b);c!==this.isEmpty()&&this._buildOptions.stateChangeCallback(!c,this)}else a.apply(this,b)};Container.prototype.getGroupDisplay=function(a){for(var b=this.getAllSubGroups(),c=0,d=b.length;c<d;++c)if(b[c]._model===
a)return b[c];return null};Container.prototype.addDummyGroups=function(a,b){var c=l.addDummyGroups(a);c.push(a);for(var d,f=c[0].getGroupParentName();!d&&f;)f=l.getGroupByName(f),(d=this.getGroupDisplay(f))||c.unshift(f),f=f.getGroupParentName();d||(d=this);for(var f=[],e=0,g=c.length;e<g;++e)f.push(c[e].newDisplayObject());c=0;for(e=f.length-1;c<e;++c)f[c].addChild(f[c+1]);GroupDisplay.prototype.addChild.call(d,f[0],b);return f[f.length-1]};Container.prototype.removeChild=function(){this.checkForStateChange(GroupDisplay.prototype.removeChild,
arguments)};Container.prototype.addChild=function(){var a=function(a){a._model.isFavorite()&&this.addFavorite(a._model)},b=function(b,c,d){if(c){var f=this.getGroupDisplay(c);f||(f=this.addDummyGroups(c,d));f.addChild(b,d)}else GroupDisplay.prototype.addChild.call(this,b,d);this.processItems(b,a)};return function(){this.checkForStateChange(b,arguments)}}();Container.prototype.getSelectedItems=function(){return this._selectedItems.slice()};Container.prototype.getSelectedModelItems=function(){for(var a=
[],b=0,c=this._selectedItems.length;b<c;++b)a.push(this._selectedItems[b]._model);return a};Container.prototype.removeSelectedItem=function(a,b){b&&this._lastToggleSelectTarget&&this._lastToggleSelectTarget!==a&&(this.shiftSelect(a,this._lastToggleSelectTarget,"deselect"),this._lastToggleSelectTarget.deselect());for(var c=0,f=this._selectedItems.length;c<f;++c)if(a===this._selectedItems[c]){this._selectedItems.splice(c,1);break}c=this._selectedItems.length;d.getOption(this._buildOptions,"publishSelect",
!0)?(0===c&&Topics.get(Topics.ITEMS_DESELECTED).publish(),Topics.get(Topics.SELECT_COUNT_CHANGE).publish(c)):this.callSelectCallback(c)};Container.prototype.callSelectCallback=function(a){var b=d.getOption(this._buildOptions,"selectCallback",null);"function"===typeof b&&b(a)};var b=function(a,c,d){if(0<a.length)for(var f=a.pop(),e=f._parent.getChildrenIncludingFavorites(),g=0,k=e.length;g<k;++g){var h=e[g];h===f?(b(a,c,d),c=!c):c&&h[d].apply(h)}};Container.prototype.shiftSelectSimple=function(a,b,
c){for(var d=null,f=this.getSortedItems(),e=0,g=f.length;e<g;++e){var k=f[e];if(k===a||k===b)if(null===d)d=!0;else break;else d&&k[c].apply(k)}};Container.prototype.shiftSelect=function(a,c,d){if(c)if(this._folderView){for(var e=[a],f=[c];a._parent!==c._parent;)null!==a._parent&&(a=a._parent,e.push(a)),null!==c._parent&&(c=c._parent,f.push(c));for(;0<e.length&&0<f.length&&e[e.length-1]===f[f.length-1];)e.pop(),f.pop();a=e.pop();c=f.pop();for(var g=!1,k=a._parent.getChildrenIncludingFavorites(),h=
0,l=k.length;h<l;++h){var p=k[h];p===a||p===c?(p===a?b(e,g,d):b(f,g,d),g=!g):g&&p[d].apply(p)}}else this.shiftSelectSimple(a,c,d)};Container.prototype.addSelectedItems=function(a,b){var c=0===this._selectedItems.length,e=d.getOption(this._buildOptions,"multiSelect",!0);b&&e&&this._lastToggleSelectTarget&&this._lastToggleSelectTarget!==a&&(this.shiftSelect(a,this._lastToggleSelectTarget,"select"),this._lastToggleSelectTarget.select());this._selectedItems.push(a);!e&&this._lastToggleSelectTarget&&this._lastToggleSelectTarget!==
a&&this._lastToggleSelectTarget.deselect();d.getOption(this._buildOptions,"publishSelect",!0)?(c&&Topics.get(Topics.ITEMS_SELECTED).publish(),Topics.get(Topics.SELECT_COUNT_CHANGE).publish(this._selectedItems.length)):this.callSelectCallback(this._selectedItems.length)};Container.prototype.pushSelectTarget=function(a){this._selectedStack.push(a)};Container.prototype.clearSelected=function(){if(0<this._selectedItems.length){d.getOption(this._buildOptions,"publishSelect",!0)?(Topics.get(Topics.ITEMS_DESELECTED).publish(),
Topics.get(Topics.SELECT_COUNT_CHANGE).publish(0)):this.callSelectCallback(0);for(var a=this._selectedItems.slice(),b=0,c=a.length;b<c;++b)a[b].deselect()}this._selectedItems=[];this._lastToggleSelectTarget=null};Container.prototype.createSelectionContextMenu=function(){var a=this.getSelectedItems();return 0<a.length?a[0].createContextMenu():null};Container.prototype.destruct=function(){if(!this._destructed){this.scrollHandler&&this.scrollParent.unbind("scroll",this.scrollHandler);this.searchInput&&
this.searchInput.unbind("keydown.containerSearchNav");this.clearSelected();for(var a=0,b=this._subscriptions.length;a<b;++a){var c=this._subscriptions[a];c.topic.unsubscribe(c.callback)}this._$_element&&this._$_element.empty();this.$stickyFoldersContainer&&this.$stickyFoldersContainer.remove();GroupDisplay.prototype.destruct.apply(this)}};Container.prototype.collapse=function(){};Container.prototype.open=function(){};Container.prototype.setFolderView=function(a){this._folderView=a;this._$_element&&
(a?this._$_element.removeClass("itemView"):(this._$_element.addClass("itemView"),d.removeDOMChildren(this.stickyFoldersContainer)))};Container.prototype.sortByFolder=function(a){a=a?this.sortByNameAsc:this.sortByNameDesc;if(a!==this._buildOptions.sortFunction||d.getOption(this._filter,"hasFolderView",!0)&&!this._folderView)this._buildOptions.sortFunction=a,this.setFolderView(!0),this.sortChildren(a),this._sortedItems=null;this.favoritesGroup&&this.favoritesGroup.show()};Container.prototype.sortByName=
function(a){a=a?this.sortByNameAsc:this.sortByNameDesc;(a!==this._buildOptions.sortFunction||d.getOption(this._filter,"hasFolderView",!0)&&this._folderView)&&this.sortItemsNoFolder(a)};Container.prototype.sortItemsByMostRecent=function(){(this._buildOptions.sortFunction!==this.sortByMostRecent||d.getOption(this._filter,"hasFolderView",!0)&&this._folderView)&&this.sortItemsNoFolder(this.sortByMostRecent)};Container.prototype.sortItemsNoFolder=function(a){this._buildOptions.sortFunction=a;this.setFolderView(!1);
d.removeDOMChildren(this._subFolderContents);this._element&&(this._sortedItems=this.sortItems(this.getItemChildren(!0),this._itemContents,a));this.favoritesGroup&&this.favoritesGroup.hide()};Container.prototype.handleDragStart=function(){this.$stickyFoldersContainer&&this.$stickyFoldersContainer.hide()};Container.prototype.handleDragEnd=function(){this.$stickyFoldersContainer&&this.$stickyFoldersContainer.show()};Container.prototype.getAllChildrenOrdered=function(){if(!this._folderView)return this.getSortedItems();
var a=[];this.favoritesGroup&&!this.favoritesGroup.isEmpty()&&this.favoritesGroup._shown&&(a.push(this.favoritesGroup),this.favoritesGroup._expanded&&(a=a.concat(this.favoritesGroup.getAllChildrenOrdered())));return a.concat(GroupDisplay.prototype.getAllChildrenOrdered.apply(this,arguments))};Container.prototype.getAllSubGroupsOrdered=function(){var a=GroupDisplay.prototype.getAllSubGroupsOrdered.apply(this,arguments);this.favoritesGroup&&this.favoritesGroup._shown&&!this.favoritesGroup.isEmpty()&&
a.unshift(this.favoritesGroup);return a}})()})();(function(){SharedGroupDisplay.prototype.getSharedFolderLabel=function(){var c=[];this._model.isReadOnly()&&c.push(Strings.Vault.READ_ONLY);c.push(Strings.Vault.SHARED_FOLDER);return c.join(" "+String.fromCharCode(8226)+" ")};SharedGroupDisplay.prototype.buildFolderElement=function(c){var d=GroupDisplay.prototype.buildFolderElement.apply(this,arguments);d.appendChild(this.createTextElement("div",this.getSharedFolderLabel,"sharedFolderLabel"));return d};
SharedGroupDisplay.prototype.getContextMenuItems=function(c){var e=GroupDisplay.prototype.getContextMenuItems.apply(this,arguments);e.unshift(new d.ContextMenuItem(Constants.ACTION_STOP_DOWNLOADING));e.unshift(new d.ContextMenuItem(Constants.ACTION_MANAGE));return e};SharedGroupDisplay.prototype.isExcludedAction=function(c,d){switch(c){case Constants.ACTION_CREATE_SUB_FOLDER:return this._model.isReadOnly();case Constants.ACTION_OPEN_MOVE_TO_FOLDER_MENU:return!0;default:return GroupDisplay.prototype.isExcludedAction.apply(this,
arguments)}};SharedGroupDisplay.prototype.updateView=function(){if(this._model.isDeleted()||!this._model.isDownloaded())this.destruct();else{GroupDisplay.prototype.updateView.apply(this,arguments);for(var c=this.getItemModelChildren(!0).concat(this.getAllSubGroupModels(!0)),d=0,g=c.length;d<g;++d){var b=c[d],a=b._data.group,f=a.indexOf("\\");b._data.group=this._model.getName()+(-1<f?a.substring(f):"")}}}})();(function(){LinkedGroupDisplay.prototype.getContextMenuItems=function(c){c=[];c.push(new d.ContextMenuItem(Constants.ACTION_UNLINK));
c.push(new d.ContextMenuItem(Constants.ACTION_CREATE_SUB_FOLDER));c.push(new d.ContextMenuItem(Constants.ACTION_OPEN_ALL,{divider:!0}));return c};LinkedGroupDisplay.prototype.getSharedFolderLabel=function(){return Strings.Vault.LINKED_PERSONAL_ACCOUNT}})();(function(){EmergencyAccessGroupDisplay.prototype.getSharedFolderLabel=function(){return Strings.Vault.EMERGENCY_ACCESS}})();(function(){FavoritesGroup.prototype.show=function(){this.isEmpty()||DefaultGroupDisplay.prototype.show.apply(this,arguments)};
FavoritesGroup.prototype.moveToFolder=function(c){var d=this.getContainer();if(d&&0<c.length){var g=c[0];g.passwordProtect(function(){LPRequest.makeUpdateRequest(l.addToFavorites,{parameters:[c],success:function(){for(var b=0,a=c.length;b<a;++b)d.addFavorite(c[b]);g.publishSuccess(Strings.translateString("added to Favorites"),c.length)}})},{itemsForAction:c})}}})();(function(){var c=function(c,d){this.path=c;this.css=d};NoteDisplay.prototype.NOTE_TYPES={};NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.AMEX]=
new c("images/vault_4.0/secureNoteIcons/Amex.png","noteAmex");NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.BANK]=new c("images/vault_4.0/secureNoteIcons/Bank_Account.png","noteBank");NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.CREDIT]=new c("images/vault_4.0/secureNoteIcons/Generic_Credit_Card.png","noteCredit");NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.DATABASE]=new c("images/vault_4.0/secureNoteIcons/Database.png","noteDatabase");NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.DRIVERS_LICENSE]=
new c("images/vault_4.0/secureNoteIcons/Drivers_License.png","noteDriversLicense");NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.EMAIL]=new c("images/vault_4.0/secureNoteIcons/Email.png","noteEmail");NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.GENERIC]=new c("images/vault_4.0/secureNoteIcons/Generic_Note.png","noteGeneric");NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.HEALTH_INSURANCE]=new c("images/vault_4.0/secureNoteIcons/Health_Insurance.png","noteHealthInsurance");
NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.IM]=new c("images/vault_4.0/secureNoteIcons/Instant_Messenger.png","noteIM");NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.INSURANCE]=new c("images/vault_4.0/secureNoteIcons/Insurance.png","noteInsurance");NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.MASTERCARD]=new c("images/vault_4.0/secureNoteIcons/Mastercard.png","noteMastercard");NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.MEMBERSHIP]=new c("images/vault_4.0/secureNoteIcons/Membership.png",
"noteMembership");NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.PASSPORT]=new c("images/vault_4.0/secureNoteIcons/Passport.png","notePassport");NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.SERVER]=new c("images/vault_4.0/secureNoteIcons/Server.png","noteServer");NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.SSN]=new c("images/vault_4.0/secureNoteIcons/Social_Security.png","noteSSN");NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.SOFTWARE_LICENSE]=
new c("images/vault_4.0/secureNoteIcons/Software_License.png","noteSoftwareLicense");NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.SSH_KEY]=new c("images/vault_4.0/secureNoteIcons/SSH_Key.png","noteSSHKey");NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.VISA]=new c("images/vault_4.0/secureNoteIcons/Visa.png","noteVisa");NoteDisplay.prototype.NOTE_TYPES[Note.prototype.NOTE_TYPES.WIFI]=new c("images/vault_4.0/secureNoteIcons/WiFi.png","noteWiFi");NoteDisplay.prototype.CUSTOM_NOTE_TYPE=
new c("images/vault_4.0/secureNoteIcons/Secure_Note.png","noteCustom");NoteDisplay.prototype.getLaunchElementAction=function(){return Constants.ACTION_EDIT};NoteDisplay.prototype.build=function(c){var e=VaultItemDisplay.prototype.build.apply(this,arguments);d.addClass(e,"note");return e};NoteDisplay.prototype.getIconElement=function(){var c=this._model.isCustom()?this.CUSTOM_NOTE_TYPE:this.NOTE_TYPES[this._model.getNoteType()],g=d.createElement("div","noteFormFillIcon "+c.css);g.appendChild(d.createElement("img",
{src:c.path,"class":"bigIcon"}));return g};NoteDisplay.prototype.getContextMenuItems=function(c){var e=AccountBaseDisplay.prototype.getContextMenuItems.apply(this,arguments);c||(e.push(new d.ContextMenuItem(Constants.ACTION_COPY_NOTE,{divider:!0})),this._model.hasPassword()&&e.push(new d.ContextMenuItem(Constants.ACTION_COPY_PASSWORD)),this._model.hasUsername()&&e.push(new d.ContextMenuItem(Constants.ACTION_COPY_USERNAME)),this._model.hasPrivateKey()&&e.push(new d.ContextMenuItem(Constants.ACTION_COPY_KEY)));
return e}})();(function(){AttachmentDisplay.prototype.getContextMenuItems=function(){var c=VaultItemBaseDisplay.prototype.getContextMenuItems.apply(this,arguments);c.push(new d.ContextMenuItem(Constants.ACTION_OPEN));c.push(new d.ContextMenuItem(Constants.ACTION_SAVE));c.push(new d.ContextMenuItem(Constants.ACTION_DELETE,{divider:!0}));return c};AttachmentDisplay.prototype.getAttachmentNameFirst=function(){var c=this.getDisplayName(),d=c.lastIndexOf(".")-2;return 0<d?c.substring(0,d):c};AttachmentDisplay.prototype.getAttachmentNameSecond=
function(){var c=this.getDisplayName(),d=c.lastIndexOf(".")-2;return 0<d?c.substring(d):c};AttachmentDisplay.prototype.build=function(c){c=d.createElement("div",{"class":"attachment",vaultaction:Constants.ACTION_OPEN,title:Strings.Vault.OPEN+" "+this.getDisplayName()});var e=d.createElement("div","textOverflowContainer");e.appendChild(this.createTextElement("span",this.getAttachmentNameFirst,"attachmentName"));c.appendChild(e);c.appendChild(this.createTextElement("span",this.getAttachmentNameSecond,
"attachmentName textTail"));c.appendChild(d.createElement("div",{vaultaction:Constants.ACTION_DELETE,title:Strings.Vault.DELETE,"class":"deleteAttachment"}));return c};AttachmentDisplay.prototype.postBuild=function(c,e){VaultItemBaseDisplay.prototype.postBuild.apply(this,arguments);var g=this._$_element;setTimeout(function(){d.setupMiddleEllipsis(g)},0)}})();(function(){FormFillDisplay.prototype.getContextMenuItems=function(c){var e=VaultItemDisplay.prototype.getContextMenuItems.apply(this,arguments);
c||e.push(new d.ContextMenuItem(Constants.ACTION_EDIT));e.push(new d.ContextMenuItem(Constants.ACTION_DELETE));return e};FormFillDisplay.prototype.getIconElement=function(){var c=l.decryptMobile(this._model._data.ccnum,!0,this._model.getKey()),e=LPCC.getCCIcon4_0(c),c=LPCC.getCCClass4_0(c),c=d.createElement("div",c+" noteFormFillIcon"),g=d.createElement("div");this.includeCreditInfo()&&(g.appendChild(this.createTextElement("p",this.getCardNumberDisplay,{"class":"ccNum"})),g.appendChild(this.createTextElement("p",
this.getCardExpirationDisplay,{"class":"ccExp"})));g.appendChild(d.createElement("img",{src:"images/vault_4.0/"+e,"class":"bigIcon"}));c.appendChild(g);return c};FormFillDisplay.prototype.includeCreditInfo=function(){return this._model.isCreditCard()&&!this._model.passwordProtected()};FormFillDisplay.prototype.getCardExpirationDisplay=function(){var c=l.decryptMobile(this._model._data.ccexp,!0,this._model.getKey());return c&&(c=c.split("-"),2===c.length)?c[1]+"/"+c[0].slice(-2):"--/--"};FormFillDisplay.prototype.getCardNumberDisplay=
function(){return LPCC.getFormattedNumber(l.decryptMobile(this._model._data.ccnum,!0,this._model.getKey()))};FormFillDisplay.prototype.getCardNameDisplay=function(){return l.decryptMobile(this._model._data.ccname,!0,this._model.getKey())};FormFillDisplay.prototype.build=function(c){var e=VaultItemDisplay.prototype.build.apply(this,arguments);d.addClass(e,"formFill");this.includeCreditInfo()&&d.addClass(e,"ccInfo");return e};FormFillDisplay.prototype.createSecondaryNameTextElement=function(){return this.includeCreditInfo()?
this.createTextElement("p",this.getCardNameDisplay,"small infoLabel"):VaultItemDisplay.prototype.createSecondaryNameTextElement.apply(this,arguments)};FormFillDisplay.prototype.getLaunchElementAction=function(){return Constants.ACTION_EDIT};FormFillDisplay.prototype.isDraggable=function(){return!1};FormFillDisplay.prototype.getItemButtonActions=function(){return[Constants.ACTION_EDIT,Constants.ACTION_DELETE]}})();(function(){IdentityDisplay.prototype.getContextMenuItems=function(c){var e=VaultItemBaseDisplay.prototype.getContextMenuItems.apply(this,
arguments);this._model._enabled||e.push(new d.ContextMenuItem(Constants.ACTION_ENABLE));e.push(new d.ContextMenuItem(Constants.ACTION_EDIT));e.push(new d.ContextMenuItem(Constants.ACTION_DELETE));return e};IdentityDisplay.prototype.build=function(){var c=VaultItemBaseDisplay.prototype.build.apply(this,arguments);d.addClass(c,"identity");return c};IdentityDisplay.prototype.getIconElement=function(){return d.createElement("img",{src:"images/vault_4.0/Identity_Avatar.png","class":"bigIcon"})};IdentityDisplay.prototype.getLaunchElementAction=
function(){return Constants.ACTION_ENABLE};IdentityDisplay.prototype.getItemButtonActions=function(){return[Constants.ACTION_EDIT,Constants.ACTION_DELETE]};IdentityDisplay.prototype.updateEnabledClass=function(){this._model._enabled?this._$_element.addClass("enabled"):this._$_element.removeClass("enabled")};IdentityDisplay.prototype.postBuild=function(){VaultItemBaseDisplay.prototype.postBuild.apply(this,arguments);this.updateEnabledClass()};IdentityDisplay.prototype.updateView=function(){VaultItemBaseDisplay.prototype.updateView.apply(this,
arguments);this.updateEnabledClass()};AllIdentityDisplay.prototype.getContextMenuItems=function(c){var e=VaultItemBaseDisplay.prototype.getContextMenuItems.apply(this,arguments);this._model._enabled||e.push(new d.ContextMenuItem(Constants.ACTION_ENABLE));return e};AllIdentityDisplay.prototype.build=function(){var c=VaultItemBaseDisplay.prototype.build.apply(this,arguments);d.addClass(c,"allIdentity");return c};AllIdentityDisplay.prototype.getItemButtonActions=function(){return[]};AllIdentityDisplay.prototype.handleToggleSelectedEvent=
function(){}})()})($,document,LPTools,LPProxy);
