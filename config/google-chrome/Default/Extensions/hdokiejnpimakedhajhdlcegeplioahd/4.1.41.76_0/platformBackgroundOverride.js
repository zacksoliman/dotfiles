(function(a){a.getUnavailablePreferences=function(c){return function(){var a=c();a.enablenewlogin=!g_shownewloginoption;a.hidecontextspan=void 0===chrome.contextMenus;return a}}(a.getUnavailablePreferences);a.initialize=function(){chrome.runtime.onConnect.addListener(function(c){if(0===c.name.indexOf("requestPort")){var e=a.initializeRequestFramework({sendContentScript:function(b){c.postMessage(b)},windowID:c.sender&&c.sender.tab?c.sender.tab.windowId:null,tabURL:c.sender&&c.sender.tab?c.sender.tab.url:
null,tabID:c.sender&&c.sender.tab?c.sender.tab.id:null,frameIdentity:c.sender&&c.sender.tab?c.sender.tab.id+"-"+c.sender.frameId:null});c.onMessage.addListener(e.requestHandler);c.onDisconnect.addListener(function(){e.disconnectHandler()})}})};a.openPopoverDialog=function(c){a.openTabDialog.apply(a,arguments)};a.refreshGroupNames=function(){};a.closePopovers=function(){chrome.extension.getViews({type:"popup"}).forEach(function(c){c.close()})};a.getFavicon=function(){var c=null,a=function(b,d){var a=
document.createElement("img");a.src=b;a.addEventListener("load",function(){var b;b="";try{var c=document.createElement("canvas");c.height=a.clientHeight;c.width=a.clientWidth;c.getContext("2d").drawImage(a,0,0);b=c.toDataURL()}catch(h){}document.body.removeChild(a);d(b)});a.addEventListener("error",function(){d("");document.body.removeChild(a)});document.body.appendChild(a)};document.addEventListener("DOMContentLoaded",function(){a("chrome://favicon/",function(b){c=b})});return function(b){b.url&&
b.callback&&a("chrome://favicon/"+b.url,function(d){b.callback(d===c?"":d)})}}();(function(){var c=function(b){var d=chrome.extension.getViews({type:"tab",windowId:b.windowID});if(1===d.length)return d[0];for(var a=0,c=d.length;a<c;++a){var e=d[a];if(e.tabID===b.tabID)return e}return null},e=function(b,d){LPTabs.get({tabID:b.id,callback:function(a){if(d.inject){var e=0,g=[].concat(d.inject.files),h=function(){++e===g.length&&(a.extendTop({context:d.inject.context}),d.inject.allFrames&&a.extendFrames({context:d.inject.context}),
d.loadHandler&&d.loadHandler(a))};g.forEach(function(a){chrome.tabs.executeScript(b.id,{file:a,allFrames:d.inject.allFrames},h)})}else d.loadHandler&&d.loadHandler(a);if(d.closeHandler){var f=c(a.tabDetails);f&&f.addEventListener("beforeunload",function(){d.closeHandler(f)})}}})};a.getCurrentTab=function(b){chrome.tabs.query({active:!0,currentWindow:!0},function(a){1===a.length&&LPTabs.get({tabID:a[0].id,callback:b})})};a.openDialogWindow=function(b){var a=b.features||{};a.url=b.url;a.type=chrome.windows.CreateType.POPUP;
chrome.windows.create(a,function(a){e(a.tabs[0],b)})};a.openTab=function(a){chrome.tabs.create({url:a.url,active:!a.inactive},function(b){e(b,a)})};a.openWindow=function(a){chrome.windows.create({url:a.url},function(b){e(b.tabs[0],a)})};a.openSame=function(a){chrome.tabs.update(null,{url:a.url},function(b){e(b,a)})};a.navigateTab=function(a){chrome.tabs.update(a.tabId,{url:a.url,active:!0},function(b){e(b,a)})};a.activateTab=function(a){chrome.windows.update(a.windowID,{focused:!0});chrome.tabs.update(a.tabID,
{active:!0})};a.closeTab=function(a){chrome.tabs.remove(a.tabID)};a.onTabUpdated=function(a){if("function"===typeof a){var b=function(b,c){"complete"===c.status&&LPTabs.get({tabID:c.tabId,callback:a})};chrome.tabs.onUpdated.addListener(b)}return function(){chrome.tabs.onUpdated.removeListener(b)}};a.onTabActivated=function(a){if("function"===typeof a){var b=function(b){LPTabs.get({tabID:b.tabId,callback:a})};chrome.tabs.onActivated.addListener(b)}return function(){chrome.tabs.onActivated.removeListener(b)}};
a.onTabClosed=function(a){if("function"===typeof a){var b=function(b){a(b)};chrome.tabs.onRemoved.addListener(b)}return function(){chrome.tabs.onRemoved.removeListener(b)}};a.onTransition=function(a){if("function"===typeof a){var b=function(b){a(b)};chrome.webNavigation.onCommitted.addListener(b)}return function(){chrome.webNavigation.onCommitted.removeListener(b)}}})()})(LPPlatform);
