(function(d){var a=function(c){this.options=d.extend({$parentEl:null,$pingEl:null,id:"ping",pingClass:"ping-container",orientation:null,targetId:null,pingOffset:{top:0,left:0}},c);this.setup();return this};a.prototype.setup=function(){this.options.$parentEl&&(this.options.$pingEl=d("<div></div>").attr("id",this.options.id).addClass(this.options.pingClass).append(d("<div></div>").attr("id",this.options.id+"_ring1").addClass("ring")).append(d("<div></div>").attr("id",this.options.id+"_ring2").addClass("ring")).append(d("<div></div>").attr("id",
this.options.id+"_dot").addClass("dot")),this.options.$parentEl.append(this.options.$pingEl))};a.prototype.subscribeToWindowResize=function(){var c=this;c.positionAndResizeHandler=function(a){c.setPosition()};window&&window.addEventListener("resize",c.positionAndResizeHandler);Topics.get(Topics.VAULT_LEFT_MENU_TOGGLE).subscribe(c.positionAndResizeHandler);return c};a.prototype.unSubscribeToWindowResize=function(){window&&(window.removeEventListener&&window.removeEventListener("resize",this.positionAndResizeHandler),
this.positionAndResizeHandler=null);Topics.get(Topics.VAULT_LEFT_MENU_TOGGLE).unsubscribe(this.positionAndResizeHandler);return this};a.prototype.setPosition=function(){if(this.options.$pingEl&&this.options.orientation&&this.options.targetId){this.options.$pingEl.css("top","");this.options.$pingEl.css("bottom","");this.options.$pingEl.css("left","");this.options.$pingEl.css("right","");var c=0,a=0,b;(b=d(this.options.targetId))&&"object"==typeof b&&0<b.length?(b=d.extend({height:b.height(),width:b.width()},
b.offset()),b.center={top:Math.round(b.top+b.height/2),left:Math.round(b.left+b.width/2)}):b=null;b&&(c=b.center.top+this.options.pingOffset.top,a=b.center.left+this.options.pingOffset.left);switch(this.options.orientation){case "top":this.options.$pingEl.css("left",a+"px");this.options.$pingEl.css("top",c+"px");break;case "bottom":this.options.$pingEl.css("left",a+"px");this.options.$pingEl.css("top",c+"px");break;case "left":this.options.$pingEl.css("left",a+"px");this.options.$pingEl.css("top",
c+"px");break;case "right":this.options.$pingEl.css("left",a+"px"),this.options.$pingEl.css("top",c+"px")}}};a.prototype.show=function(){this.options.$pingEl&&(this.setPosition(),this.options.$pingEl.show());return this};a.prototype.hide=function(){this.options.$pingEl&&this.options.$pingEl.hide();return this};a.prototype.activate=function(){this.options.$pingEl&&(this.options.$pingEl.find("#"+this.options.id+"_ring1").addClass("ping"),this.options.$pingEl.find("#"+this.options.id+"_ring2").addClass("ping-2"),
this.options.$pingEl.find("#"+this.options.id+"_dot").addClass("breathe"));return this};a.prototype.deActivate=function(){this.options.$pingEl&&(this.options.$pingEl.find("#"+this.options.id+"_ring1").removeClass("ping"),this.options.$pingEl.find("#"+this.options.id+"_ring2").removeClass("ping-2"),this.options.$pingEl.find("#"+this.options.id+"_dot").removeClass("breathe"));return this};return window.lpPing=a})(jQuery);
