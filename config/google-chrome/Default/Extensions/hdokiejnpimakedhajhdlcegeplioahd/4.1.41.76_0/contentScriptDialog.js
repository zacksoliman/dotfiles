(function(){var e=Dialog,f=LPTools.getURLParams(),b=function(c,a){e.call(this,c,a);this.childDialogs=[];this.pendingAnimations=0};b.prototype=Object.create(Dialog.prototype);b.prototype.constructor=b;b.prototype.close=function(c){this.childDialogs.forEach(function(a){a.close(c)});var a=e.prototype.close.apply(this,arguments);a&&(0===e.prototype.getDialogCount()?csTop.LPFrame.close(f.dialogID):this.setFrameSize());this.data.modal&&csTop.LPFrame.hideModal();return a};b.prototype.setFrameSize=function(c){csTop.LPFrame.css({id:f.dialogID,
css:this.getSize(),callback:c&&c.callback})};b.prototype.addChildDialog=function(c){this.childDialogs.push(c);this.$element.append(c.$element)};b.prototype.getSize=function(){for(var c=$(".dialog:visible, .selectDropdownList:visible"),a=null,b=0;b<c.length;++b){var d;d=c[b];var e=d.getBoundingClientRect();d=$(d);d={top:e.top-parseInt(d.css("margin-top")),right:e.right+parseInt(d.css("margin-right")),bottom:e.bottom+parseInt(d.css("margin-bottom")),left:e.left-parseInt(d.css("margin-left"))};null===
a?a=d:(a.top=Math.min(a.top,d.top),a.right=Math.max(a.right,d.right),a.bottom=Math.max(a.bottom,d.bottom),a.left=Math.min(a.left,d.left))}return{"max-height":a?a.bottom-a.top:0,"max-width":a?a.right-a.left:0}};b.prototype.isOverlay=function(){return!1};b.prototype.requestAnimationFrame=function(b){var a=this,c=function(){++a.pendingAnimations;b(function(b){--a.pendingAnimations;0===a.pendingAnimations&&a.setFrameSize(b)})};0===this.pendingAnimations?csTop.LPFrame.css({id:f.dialogID,css:{"max-height":"none",
"max-width":"none"},callback:c}):c()};b.prototype.postSetup=function(){e.prototype.postSetup.apply(this,arguments);this.hide();csTop.LPFrame.css({id:f.dialogID,css:{display:"block"},callback:this.createHandler(function(){this.showInitial()})})};b.prototype.showInitial=function(){this.show();this.data.modal&&csTop.LPFrame.showModal();csTop.LPFrame.css({id:f.dialogID,css:this.getSize()})};b.prototype.addPasswordEye=function(b){b.LP_addPasswordEye({checkPermissionHandler:this.checkViewPasswordHandler,
includeGenerateButton:b.hasClass("generate"),textual:!0})};var g=$.extend({},Dialog.prototype);$.extend(Dialog.prototype,b.prototype);Dialog=b;e.prototype=g})();
