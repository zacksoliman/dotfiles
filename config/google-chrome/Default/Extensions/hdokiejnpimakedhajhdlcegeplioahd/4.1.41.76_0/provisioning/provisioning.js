var Provisioning;
(function(h){var k=function(){function c(a,b){this.platform=a;this.global=b}c.prototype.checkUserState=function(a){!this.global.lploggedin&&this.global.shouldOpenLogin4_0()?(a({error:"User is not logged in."}),this.platform.openLoginPopover()):a({result:"OK."})};c.prototype.sendApiCalls=function(a,b,c){var f=this;this.platform.openTab({url:this.urlToCall(a),inactive:!0,loadHandler:function(a){var e={global:!1,type:b.action_type||"GET",cache:!1,url:b.url,data:b.params,success:function(b){f.handleResponseFromThridParty(a,c,
b)},error:function(b,d,e){f.handleResponseFromThridParty(a,c,{error:d})}};if(b.header){e.headers={};for(var d=0;d<b.header.length;d++)e.headers[b.header[d].key]=b.header[d].value}if("json"!==b.dataType){var d=[],g;for(g in b.data)d.push(g+"="+encodeURIComponent(b.data[g]));e.data=d.join("&")}else e.data=JSON.stringify(b.data);a.getTop().jQuery.ajax(e);f.cstimeout=setTimeout(function(){f.handleResponseFromThridParty(a,c,{error:"timeout"})},1E4)}})};c.prototype.handleResponseFromThridParty=function(a,
b,c){clearTimeout(this.cstimeout);b(c);a.close()};c.prototype.getLocalKey=function(a){a({key:g_local_key,hash:g_local_key_hash,hex:g_local_key_hex})};c.prototype.urlToCall=function(a){a=lpParseUri(a);return a.protocol?a.protocol+"://"+a.host:a.host};return c}();h.ProvisioningService=k;h.provisioning=new k(LPPlatform,window)})(Provisioning||(Provisioning={}));
